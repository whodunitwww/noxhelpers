return function(a,b,c)local d=a.ESP:AddRightGroupbox("Player Radar","map")local e={gui=nil,conn=nil,range=500,scale=1,mode="Camera",rings={},_holder=nil,_centerIcon=nil,buildRings=nil,updateRings=nil}local function f()if e.conn then e.conn:Disconnect()e.conn=nil end;if e.gui then e.gui:Destroy()e.gui=nil end;e.rings={}e._holder,e._centerIcon=nil,nil end;local function g()f()local h=gethui and gethui()or b.CoreGui;local i=Instance.new("ScreenGui")i.Name="CerberusRadar"i.ResetOnSpawn=false;i.IgnoreGuiInset=true;i.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;i.Parent=h;e.gui=i;local j=Instance.new("Frame")j.Name="Holder"j.AnchorPoint=Vector2.new(1,1)j.Position=UDim2.new(1,-20,1,-20)j.Size=UDim2.fromOffset(200*e.scale,200*e.scale)j.BackgroundColor3=Color3.fromRGB(25,25,25)j.BackgroundTransparency=0.2;j.Active=true;j.ClipsDescendants=false;j.Parent=i;local k=Instance.new("UICorner",j)k.CornerRadius=UDim.new(1,0)local l=Instance.new("UIStroke",j)l.Thickness=2;l.Color=Color3.fromRGB(92,94,104)l.Transparency=0.3;local m=Instance.new("ImageLabel")m.BackgroundTransparency=1;m.Image="rbxassetid://136497541793809"m.ImageColor3=Color3.fromRGB(55,235,120)m.AnchorPoint=Vector2.new(0.5,0.5)m.Position=UDim2.fromScale(0.5,0.5)m.Size=UDim2.fromOffset(22*e.scale,22*e.scale)m.Parent=j;local function n()for o,p in ipairs(e.rings)do p.Frame:Destroy()end;e.rings={}for o,q in ipairs({0.25,0.75})do local r=Instance.new("Frame")r.Name="Ring"r.BackgroundTransparency=1;r.SizeConstraint=Enum.SizeConstraint.RelativeXX;r.Size=UDim2.fromScale(q,q)r.AnchorPoint=Vector2.new(0.5,0.5)r.Position=UDim2.fromScale(0.5,0.5)r.Parent=j;local s=Instance.new("UICorner",r)s.CornerRadius=UDim.new(1,0)local t=Instance.new("UIStroke",r)t.Color=Color3.fromRGB(60,60,60)t.Thickness=1;t.Transparency=0.6;local u=Instance.new("TextLabel")u.Name="Studs"u.BackgroundTransparency=1;u.Font=Enum.Font.Gotham;u.TextColor3=Color3.fromRGB(150,150,150)u.TextSize=10*e.scale;u.AnchorPoint=Vector2.new(0.5,0)u.Position=UDim2.new(0.5,0,1,2*e.scale)u.ZIndex=5;u.Parent=r;table.insert(e.rings,{Frame=r,Label=u,Percent=q})end end;local function v()for o,p in ipairs(e.rings)do p.Label.Text=string.format("%d studs",math.floor(p.Percent*e.range+0.5))p.Label.TextSize=10*e.scale;p.Label.Position=UDim2.new(0.5,0,1,2*e.scale)end end;n()v()do local w,x,y;j.InputBegan:Connect(function(z)if z.UserInputType==Enum.UserInputType.MouseButton1 or z.UserInputType==Enum.UserInputType.Touch then w=true;x=z.Position;y=j.Position;z.Changed:Connect(function()if z.UserInputState==Enum.UserInputState.End then w=false end end)end end)j.InputChanged:Connect(function(z)if w and(z.UserInputType==Enum.UserInputType.MouseMovement or z.UserInputType==Enum.UserInputType.Touch)then local A=z.Position-x;j.Position=UDim2.new(y.X.Scale,y.X.Offset+A.X,y.Y.Scale,y.Y.Offset+A.Y)end end)end;e.conn=b.RunService.Heartbeat:Connect(function()local B=c.humanoidRootPart;if not B then return end;for o,C in ipairs(j:GetChildren())do if C.Name=="Blip"and C:IsA("Frame")then C:Destroy()end end;local D=j.AbsoluteSize;local E=Vector2.new(D.X/2,D.Y/2)local F=math.min(D.X,D.Y)/2-12*e.scale;local G=b.Teams and#b.Teams:GetChildren()>0;local H=b.Players.LocalPlayer.Team;local I=workspace.CurrentCamera;local J=I and I.CFrame.RightVector;local K=I and I.CFrame.LookVector;for o,L in ipairs(b.Players:GetPlayers())do if L~=c.player and L.Character then local M=L.Character:FindFirstChild("HumanoidRootPart")if M then local N=M.Position-B.Position;local O=N.Magnitude;if O<=e.range then local P,Q;if e.mode=="Camera"and J and K then P=N:Dot(J)Q=-N:Dot(K)else P=N.X;Q=N.Z end;local R=Vector2.new(P,Q)/e.range*F;local S=G and(L.Team~=nil and H~=nil and L.Team==H)local T=Instance.new("Frame")T.Name="Blip"T.AnchorPoint=Vector2.new(0.5,0.5)T.Size=UDim2.fromOffset(8*e.scale,8*e.scale)T.Position=UDim2.fromOffset(E.X+R.X,E.Y+R.Y)T.BackgroundColor3=S and Color3.fromRGB(55,235,120)or Color3.fromRGB(235,55,55)T.BorderSizePixel=0;T.ZIndex=10;T.Parent=j;local U=Instance.new("UICorner",T)U.CornerRadius=UDim.new(1,0)end end end end end)e._holder=j;e._centerIcon=m;e.buildRings=n;e.updateRings=v end;d:AddToggle("Radar_Enable",{Text="Enable Radar",Default=false,Callback=function(V)if V then g()else f()end end})d:AddSlider("Radar_Range",{Text="Range",Default=500,Min=100,Max=2000,Rounding=0,Suffix=" studs",Callback=function(V)e.range=V;if e.updateRings then e.updateRings()end end})d:AddSlider("Radar_Scale",{Text="HUD Scale",Default=100,Min=50,Max=200,Rounding=0,Suffix="%",Callback=function(V)e.scale=V/100;if e.gui and e._holder then local W=e._holder;W.Size=UDim2.fromOffset(200*e.scale,200*e.scale)if e._centerIcon then e._centerIcon.Size=UDim2.fromOffset(22*e.scale,22*e.scale)end;for o,p in ipairs(e.rings)do p.Label.TextSize=10*e.scale;p.Label.Position=UDim2.new(0.5,0,1,2*e.scale)end end end})d:AddDropdown("Radar_Mode",{Text="Rotation Mode",Values={"Camera","North"},Default="Camera",Callback=function(V)e.mode=V end})return{destroy=f,create=g,isActive=function()return e.gui~=nil end}end
