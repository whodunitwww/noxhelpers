return function(a,b,c,d,e,f)local g,h,i,j,k,l,m=a.RunService,a.Lighting,a.Players,a.ContextActionService,a.UserInputService,a.StarterGui,a.Workspace;local n=b.ESP:AddRightGroupbox("Player Radar","map")local o={gui=nil,conn=nil,range=500,scale=1,mode="Camera",rings={},_holder=nil,_centerIcon=nil,buildRings=nil,updateRings=nil}local function p()if o.conn then o.conn:Disconnect()o.conn=nil end;if o.gui then o.gui:Destroy()o.gui=nil end;o.rings={}o._holder,o._centerIcon=nil,nil end;local function q()p()local r=gethui and gethui()or a.CoreGui;local s=Instance.new("ScreenGui")s.Name="CerberusRadar"s.ResetOnSpawn=false;s.IgnoreGuiInset=true;s.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;s.Parent=r;o.gui=s;local t=Instance.new("Frame")t.Name="Holder"t.AnchorPoint=Vector2.new(1,1)t.Position=UDim2.new(1,-20,1,-20)t.Size=UDim2.fromOffset(200*o.scale,200*o.scale)t.BackgroundColor3=Color3.fromRGB(25,25,25)t.BackgroundTransparency=0.2;t.Active=true;t.ClipsDescendants=false;t.Parent=s;local u=Instance.new("UICorner",t)u.CornerRadius=UDim.new(1,0)local v=Instance.new("UIStroke",t)v.Thickness=2;v.Color=Color3.fromRGB(92,94,104)v.Transparency=0.3;local w=Instance.new("ImageLabel")w.BackgroundTransparency=1;w.Image="rbxassetid://136497541793809"w.ImageColor3=Color3.fromRGB(55,235,120)w.AnchorPoint=Vector2.new(0.5,0.5)w.Position=UDim2.fromScale(0.5,0.5)w.Size=UDim2.fromOffset(22*o.scale,22*o.scale)w.Parent=t;local function x()for y,z in ipairs(o.rings)do z.Frame:Destroy()end;o.rings={}for y,A in ipairs({0.25,0.75})do local B=Instance.new("Frame")B.Name="Ring"B.BackgroundTransparency=1;B.SizeConstraint=Enum.SizeConstraint.RelativeXX;B.Size=UDim2.fromScale(A,A)B.AnchorPoint=Vector2.new(0.5,0.5)B.Position=UDim2.fromScale(0.5,0.5)B.Parent=t;local C=Instance.new("UICorner",B)C.CornerRadius=UDim.new(1,0)local D=Instance.new("UIStroke",B)D.Color=Color3.fromRGB(60,60,60)D.Thickness=1;D.Transparency=0.6;local E=Instance.new("TextLabel")E.Name="Studs"E.BackgroundTransparency=1;E.Font=Enum.Font.Gotham;E.TextColor3=Color3.fromRGB(150,150,150)E.TextSize=10*o.scale;E.AnchorPoint=Vector2.new(0.5,0)E.Position=UDim2.new(0.5,0,1,2*o.scale)E.ZIndex=5;E.Parent=B;table.insert(o.rings,{Frame=B,Label=E,Percent=A})end end;local function F()for y,z in ipairs(o.rings)do z.Label.Text=string.format("%d studs",math.floor(z.Percent*o.range+0.5))z.Label.TextSize=10*o.scale;z.Label.Position=UDim2.new(0.5,0,1,2*o.scale)end end;x()F()do local G,H,I;t.InputBegan:Connect(function(J)if J.UserInputType==Enum.UserInputType.MouseButton1 or J.UserInputType==Enum.UserInputType.Touch then G=true;H=J.Position;I=t.Position;J.Changed:Connect(function()if J.UserInputState==Enum.UserInputState.End then G=false end end)end end)t.InputChanged:Connect(function(J)if G and(J.UserInputType==Enum.UserInputType.MouseMovement or J.UserInputType==Enum.UserInputType.Touch)then local K=J.Position-H;t.Position=UDim2.new(I.X.Scale,I.X.Offset+K.X,I.Y.Scale,I.Y.Offset+K.Y)end end)end;o.conn=a.RunService.Heartbeat:Connect(function()local L=c.humanoidRootPart;if not L then return end;for y,M in ipairs(t:GetChildren())do if M.Name=="Blip"and M:IsA("Frame")then M:Destroy()end end;local N=t.AbsoluteSize;local O=Vector2.new(N.X/2,N.Y/2)local P=math.min(N.X,N.Y)/2-12*o.scale;local Q=a.Teams and#a.Teams:GetChildren()>0;local R=a.Players.LocalPlayer.Team;local S=workspace.CurrentCamera;local T=S and S.CFrame.RightVector;local U=S and S.CFrame.LookVector;for y,V in ipairs(a.Players:GetPlayers())do if V~=c.player and V.Character then local W=V.Character:FindFirstChild("HumanoidRootPart")if W then local X=W.Position-L.Position;local Y=X.Magnitude;if Y<=o.range then local Z,_;if o.mode=="Camera"and T and U then Z=X:Dot(T)_=-X:Dot(U)else Z=X.X;_=X.Z end;local a0=Vector2.new(Z,_)/o.range*P;local a1=Q and(V.Team~=nil and R~=nil and V.Team==R)local a2=Instance.new("Frame")a2.Name="Blip"a2.AnchorPoint=Vector2.new(0.5,0.5)a2.Size=UDim2.fromOffset(8*o.scale,8*o.scale)a2.Position=UDim2.fromOffset(O.X+a0.X,O.Y+a0.Y)a2.BackgroundColor3=a1 and Color3.fromRGB(55,235,120)or Color3.fromRGB(235,55,55)a2.BorderSizePixel=0;a2.ZIndex=10;a2.Parent=t;local a3=Instance.new("UICorner",a2)a3.CornerRadius=UDim.new(1,0)end end end end end)o._holder=t;o._centerIcon=w;o.buildRings=x;o.updateRings=F end;n:AddToggle("Radar_Enable",{Text="Enable Radar",Default=false,Callback=function(a4)if a4 then q()else p()end end})n:AddSlider("Radar_Range",{Text="Range",Default=500,Min=100,Max=2000,Rounding=0,Suffix=" studs",Callback=function(a4)o.range=a4;if o.updateRings then o.updateRings()end end})n:AddSlider("Radar_Scale",{Text="HUD Scale",Default=100,Min=50,Max=200,Rounding=0,Suffix="%",Callback=function(a4)o.scale=a4/100;if o.gui and o._holder then local a5=o._holder;a5.Size=UDim2.fromOffset(200*o.scale,200*o.scale)if o._centerIcon then o._centerIcon.Size=UDim2.fromOffset(22*o.scale,22*o.scale)end;for y,z in ipairs(o.rings)do z.Label.TextSize=10*o.scale;z.Label.Position=UDim2.new(0.5,0,1,2*o.scale)end end end})n:AddDropdown("Radar_Mode",{Text="Rotation Mode",Values={"Camera","North"},Default="Camera",Callback=function(a4)o.mode=a4 end})local a6=b.Player:AddRightGroupbox("Visuals","glasses")a6:AddToggle("InfiniteCamera",{Text="Infinite Camera Max",Default=false})local a7;d.InfiniteCamera:OnChanged(function()local V=c.player;if not V then return end;if d.InfiniteCamera.Value then a7=a7 or V.CameraMaxZoomDistance;V.CameraMaxZoomDistance=1e10 else V.CameraMaxZoomDistance=a7 or 128;a7=nil end end)a6:AddToggle("NoFog",{Text="No Fog",Default=false})local a8,a9;local function aa(ab)if not a9 then return end;if ab:IsA("BloomEffect")or ab:IsA("SunRaysEffect")or ab:IsA("DepthOfFieldEffect")or ab:IsA("ColorCorrectionEffect")or ab:IsA("BlurEffect")then if ab.Enabled then ab:SetAttribute("NFWasEnabled",true)ab.Enabled=false end elseif ab:IsA("Atmosphere")then if a9.Atmo[ab]==nil then a9.Atmo[ab]={D=ab.Density,H=ab.Haze,O=ab.Offset,G=ab.Glare}end;ab.Density=0;ab.Haze=0;ab.Glare=0 end end;local function ac()if a9 then return end;a9={FogEnd=h.FogEnd,FogStart=h.FogStart,FogColor=h.FogColor,Atmo={}}h.FogEnd,h.FogStart=1e10,1e10;for y,K in ipairs(h:GetDescendants())do aa(K)end;a8=h.DescendantAdded:Connect(aa)end;local function ad()if not a9 then return end;if a8 then a8:Disconnect()a8=nil end;h.FogEnd,h.FogStart,h.FogColor=a9.FogEnd,a9.FogStart,a9.FogColor;for y,K in ipairs(h:GetDescendants())do if K:GetAttribute("NFWasEnabled")then K:SetAttribute("NFWasEnabled",nil)if K.Enabled~=nil then K.Enabled=true end end end;for ae,af in pairs(a9.Atmo)do if ae and ae.Parent then ae.Density,ae.Haze,ae.Offset,ae.Glare=af.D,af.H,af.O,af.G end end;a9=nil end;d.NoFog:OnChanged(function()if d.NoFog.Value then ac()else ad()end end)a6:AddToggle("XRay",{Text="X-Ray",Default=false,Tooltip="See through structures"})local function ag(ah)for y,a4 in ipairs(m:GetDescendants())do if a4:IsA("BasePart")then if not a4.Parent:FindFirstChildOfClass("Humanoid")and not(a4.Parent.Parent and a4.Parent.Parent:FindFirstChildOfClass("Humanoid"))then a4.LocalTransparencyModifier=ah and 0.5 or 0 end end end end;d.XRay:OnChanged(function()ag(d.XRay.Value)end)a6:AddToggle("Fullbright",{Text="Fullbright",Default=false})a6:AddSlider("Fullbright_Brightness",{Text="Brightness",Default=0.1,Min=0.01,Max=1,Rounding=3})local ai,aj;local function ak()if ai then return end;aj=aj or{B=h.Brightness,GS=h.GlobalShadows,A=h.Ambient}ai=g.RenderStepped:Connect(function()h.Brightness=e.Fullbright_Brightness.Value;h.GlobalShadows=false;h.Ambient=Color3.new(1,1,1)end)end;local function al()if ai then ai:Disconnect()ai=nil end;if aj then h.Brightness=aj.B;h.GlobalShadows=aj.GS;h.Ambient=aj.A;aj=nil end end;d.Fullbright:OnChanged(function()if d.Fullbright.Value then ak()else al()end end)a6:AddSlider("CameraFOV",{Text="Camera FOV",Default=70,Min=40,Max=120,Rounding=0})local function am()if c.camera then c.camera.FieldOfView=e.CameraFOV.Value end end;e.CameraFOV:OnChanged(am)am()a6:AddToggle("FreecamEnabled",{Text="Freecam",Default=false}):AddKeyPicker("FreecamKey",{Default=nil,SyncToggleState=true,Mode="Toggle",Text="Freecam Key"})a6:AddSlider("FreecamSensitivity",{Text="Freecam Sensitivity",Default=1.0,Min=0.1,Max=3.0,Rounding=2,Tooltip="Scales look + movement speed"})local an=m.CurrentCamera;m:GetPropertyChangedSignal("CurrentCamera"):Connect(function()an=m.CurrentCamera end)local ao,ap,aq,ar,as,at,au,av=math.pi,math.exp,math.rad,math.sqrt,math.tan,math.abs,math.clamp,math.sign;local aw=aq(90)local ax={}ax.__index=ax;function ax.new(ay,a0)return setmetatable({f=ay,p=a0,v=a0*0},ax)end;function ax:Update(az,aA)local aB=self.f*2*ao;local aC,aD=self.p,self.v;local aE=aA-aC;local aF=ap(-aB*az)local aG=aA+(aD*az-aE*(aB*az+1))*aF;local aH=(aB*az*(aE*aB-aD)+aD)*aF;self.p,self.v=aG,aH;return aG end;function ax:Reset(a0)self.p=a0;self.v=a0*0 end;local aI=ax.new(1.5,Vector3.new())local aJ=ax.new(1.0,Vector2.new())local aK=ax.new(4.0,0)local aL,aM,aN=Vector3.new(),Vector2.new(),70;local aO=1;local aP={KB="CerbFC_Keyboard",MousePan="CerbFC_MousePan",Wheel="CerbFC_MouseWheel",GPBtn="CerbFC_GPBtn",GPTrig="CerbFC_GPTrig",GPThumb="CerbFC_GPThumb",TouchPan="CerbFC_TouchPan",Pinch="CerbFC_Pinch"}local aQ={ButtonX=0,ButtonY=0,ButtonL2=0,ButtonR2=0,Thumbstick1=Vector2.new(),Thumbstick2=Vector2.new()}local aR={W=0,A=0,S=0,D=0,E=0,Q=0,U=0,H=0,J=0,K=0,I=0,Y=0,Up=0,Down=0}local aS={Delta=Vector2.new(),MouseWheel=0}local aT={PanDelta=Vector2.new(),VerticalPanDelta=Vector2.new(),PinchDelta=1.0,ActiveTouches={}}local function aU(aV)local aW,aX=2.0,0.15;local function aY(a4)return(ap(aW*a4)-1)/(ap(aW)-1)end;local function aZ(a4)return aY((a4-aX)/(1-aX))end;return av(aV)*au(aZ(at(aV)),0,1)end;local function a_()j:BindActionAtPriority(aP.KB,function(y,b0,b1)aR[b1.KeyCode.Name]=b0==Enum.UserInputState.Begin and 1 or 0;return Enum.ContextActionResult.Sink end,false,Enum.ContextActionPriority.High.Value,Enum.KeyCode.W,Enum.KeyCode.U,Enum.KeyCode.A,Enum.KeyCode.H,Enum.KeyCode.S,Enum.KeyCode.J,Enum.KeyCode.D,Enum.KeyCode.K,Enum.KeyCode.E,Enum.KeyCode.I,Enum.KeyCode.Q,Enum.KeyCode.Y,Enum.KeyCode.Up,Enum.KeyCode.Down)j:BindActionAtPriority(aP.MousePan,function(y,y,b1)local K=b1.Delta;aS.Delta=Vector2.new(-K.y,-K.x)return Enum.ContextActionResult.Sink end,false,Enum.ContextActionPriority.High.Value,Enum.UserInputType.MouseMovement)j:BindActionAtPriority(aP.Wheel,function(y,y,b1)aS[b1.UserInputType.Name]=-b1.Position.z;return Enum.ContextActionResult.Sink end,false,Enum.ContextActionPriority.High.Value,Enum.UserInputType.MouseWheel)j:BindActionAtPriority(aP.TouchPan,function(y,b0,b1)if b0==Enum.UserInputState.Begin then aT.ActiveTouches[b1.UserInputType]=true elseif b0==Enum.UserInputState.End then aT.ActiveTouches[b1.UserInputType]=nil elseif b0==Enum.UserInputState.Change then local b2=0;for y in pairs(aT.ActiveTouches)do b2=b2+1 end;if b2==1 then local K=b1.Delta;aT.PanDelta=aT.PanDelta+Vector2.new(-K.y,-K.x)elseif b2>=2 then local K=b1.Delta;aT.VerticalPanDelta=aT.VerticalPanDelta+K end end;return Enum.ContextActionResult.Sink end,false,Enum.ContextActionPriority.High.Value,Enum.UserInputType.Touch)j:BindActionAtPriority(aP.Pinch,function(y,b0,b1)if b0==Enum.UserInputState.Change then aT.PinchDelta=b1.Scale end;return Enum.ContextActionResult.Sink end,false,Enum.ContextActionPriority.High.Value,Enum.UserInputType.Pinch)j:BindActionAtPriority(aP.GPBtn,function(y,b0,b1)aQ[b1.KeyCode.Name]=b0==Enum.UserInputState.Begin and 1 or 0;return Enum.ContextActionResult.Sink end,false,Enum.ContextActionPriority.High.Value,Enum.KeyCode.ButtonX,Enum.KeyCode.ButtonY)j:BindActionAtPriority(aP.GPTrig,function(y,y,b1)aQ[b1.KeyCode.Name]=b1.Position.z;return Enum.ContextActionResult.Sink end,false,Enum.ContextActionPriority.High.Value,Enum.KeyCode.ButtonR2,Enum.KeyCode.ButtonL2)j:BindActionAtPriority(aP.GPThumb,function(y,y,b1)aQ[b1.KeyCode.Name]=b1.Position;return Enum.ContextActionResult.Sink end,false,Enum.ContextActionPriority.High.Value,Enum.KeyCode.Thumbstick1,Enum.KeyCode.Thumbstick2)end;local function b3()aO=1;for b4 in pairs(aQ)do aQ[b4]=typeof(aQ[b4])=="Vector2"and Vector2.new()or 0 end;for b4 in pairs(aR)do aR[b4]=0 end;aS.Delta=Vector2.new()aS.MouseWheel=0;aT.PanDelta=Vector2.new()aT.VerticalPanDelta=Vector2.new()aT.PinchDelta=1.0;table.clear(aT.ActiveTouches)for y,b5 in pairs(aP)do j:UnbindAction(b5)end end;local b6={}local function b7()local b8=i.LocalPlayer:FindFirstChildOfClass("PlayerGui")b6.screens={}if b8 then for y,b9 in ipairs(b8:GetChildren())do if b9:IsA("ScreenGui")and b9.Enabled and b9.Name~="TouchGui"and b9.Name~="DynamicThumbstick"then b6.screens[#b6.screens+1]=b9;b9.Enabled=false end end end end;local function ba()if b6.screens then for y,b9 in ipairs(b6.screens)do if b9.Parent then b9.Enabled=true end end end;b6={}end;local bb,bc,bd;local function be()bb=c.humanoid;if bb and bb.SetStateEnabled then bc=bb:GetStateEnabled(Enum.HumanoidStateType.Jumping)bb:SetStateEnabled(Enum.HumanoidStateType.Jumping,false)end;if k and k.JumpRequest then bd=k.JumpRequest:Connect(function()if bb then bb.Jump=false end end)end end;local function bf()if bd then bd:Disconnect()bd=nil end;if bb and bb.SetStateEnabled then bb:SetStateEnabled(Enum.HumanoidStateType.Jumping,bc~=false)end;bb=nil;bc=nil end;local function bg(az,bh)aO=au(aO+az*(aR.Up-aR.Down)*0.75,0.01,4)local bi=Vector3.new(aU(aQ.Thumbstick1.X),aU(aQ.ButtonR2)-aU(aQ.ButtonL2),aU(-aQ.Thumbstick1.Y))local b4=Vector3.new(aR.D-aR.A+aR.K-aR.H,aR.E-aR.Q+aR.I-aR.Y-aT.VerticalPanDelta.Y*0.1,aR.S-aR.W+aR.J-aR.U)aT.VerticalPanDelta=Vector2.new()local bj=k:IsKeyDown(Enum.KeyCode.LeftShift)or k:IsKeyDown(Enum.KeyCode.RightShift)return(bi+b4)*64*aO*(bj and 0.25 or 1)*bh end;local function bk(az,bh)local bl=Vector2.new(aU(aQ.Thumbstick2.Y),aU(-aQ.Thumbstick2.X))*ao/8;local bm=(aS.Delta+aT.PanDelta)*ao/64;aS.Delta=Vector2.new()aT.PanDelta=Vector2.new()return(bl+bm)*8*bh end;local function bn()local bl=(aQ.ButtonX-aQ.ButtonY)*0.25;local bo=aS.MouseWheel*1.0;local bp=(aT.PinchDelta-1.0)*-5.0;aS.MouseWheel=0;aT.PinchDelta=1.0;return bl+bo+bp end;local bq=false;local function br(az)local bh=e.FreecamSensitivity.Value or 1;local bs=aI:Update(az,bg(az,bh))local bt=aJ:Update(az,bk(az,bh))local bu=aK:Update(az,bn())local bv=ar(as(aq(70/2))/as(aq(aN/2)))aN=au(aN+bu*300*az/bv,1,120)aM=aM+bt*az/bv;aM=Vector2.new(au(aM.X,-aw,aw),aM.Y%(2*ao))local bw=CFrame.new(aL)*CFrame.fromOrientation(aM.X,aM.Y,0)*CFrame.new(bs*az)aL=bw.Position;an.CFrame=bw;an.Focus=bw;an.FieldOfView=aN end;local function bx()if bq then return end;local bw=an.CFrame;aM=Vector2.new(bw:toEulerAnglesYXZ())aL=bw.Position;aN=an.FieldOfView;aI:Reset(Vector3.new())aJ:Reset(Vector2.new())aK:Reset(0)b7()be()an.CameraType=Enum.CameraType.Scriptable;k.MouseIconEnabled=false;k.MouseBehavior=Enum.MouseBehavior.LockCenter;a_()g:BindToRenderStep("CerbFreecam",Enum.RenderPriority.Camera.Value,br)bq=true end;local function by()if not bq then return end;g:UnbindFromRenderStep("CerbFreecam")b3()bf()an.CameraType=Enum.CameraType.Custom;k.MouseBehavior=Enum.MouseBehavior.Default;k.MouseIconEnabled=true;aS.Delta=Vector2.new()aS.MouseWheel=0;ba()bq=false end;d.FreecamEnabled:OnChanged(function()if d.FreecamEnabled.Value then f:Notify("Freecam enabled.",2)bx()else f:Notify("Freecam disabled.",2)by()end end)f:OnUnload(function()p()if d.InfiniteCamera and d.InfiniteCamera.Value then d.InfiniteCamera:SetValue(false)end;if d.NoFog and d.NoFog.Value then d.NoFog:SetValue(false)end;if d.XRay and d.XRay.Value then d.XRay:SetValue(false)end;if d.Fullbright and d.Fullbright.Value then d.Fullbright:SetValue(false)end;if d.FreecamEnabled and d.FreecamEnabled.Value then d.FreecamEnabled:SetValue(false)end;al()ad()ag(false)if bq then by()end end)end
