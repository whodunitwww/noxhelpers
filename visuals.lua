return function(a)local b=a.Services;local c=a.Tabs;local d=a.References;local e=a.Library;local f=a.Options;local g=a.Toggles;local h=a.LPH_NO_VIRTUALIZE or function(i)return i end;local j={}local function k(l,m,n,o,p)local request=syn and syn.request or http_request or request or fluxus and fluxus.request or krnl and krnl.request;if not request then return false,"No HTTP request function available"end;o=tonumber(o)or game.PlaceId;p=p or 2;local q=game.JobId;local function r(s)local t=("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100"):format(o)if s and s~=""then t=t.."&cursor="..b.HttpService:UrlEncode(s)end;local u=request({Url=t,Method="GET",Headers={["Content-Type"]="application/json"}})if not u or not u.Success then return false,u and u.StatusMessage or"HTTP error"end;local v,w=pcall(b.HttpService.JSONDecode,b.HttpService,u.Body)if not v then return false,"JSON decode failed"end;return true,w end;local x={}local s=nil;local y=0;while y<p do local v,z=r(s)if not v then return false,z end;local A=z;if type(A.data)~="table"then break end;for B,C in ipairs(A.data)do local D=C.id;local E=C.playing or 0;local F=C.maxPlayers or 0;local G=C.ping or C.playerPing;if D~=q then local H=E<F;local I=true;if m then I=E<=m end;local J=true;if n then if G==nil then J=false else J=G<=n end end;if H and I and J then table.insert(x,{jobId=D,players=E,maxPlayers=F,ping=G or math.huge,raw=C})end end end;s=A.nextPageCursor;y=y+1;if not s or s==""then break end end;if#x==0 then return false,"No suitable servers found"end;if l=="lowest_player"then table.sort(x,function(K,L)if K.players==L.players then return K.ping<L.ping end;return K.players<L.players end)elseif l=="lowest_ping"then table.sort(x,function(K,L)if K.ping==L.ping then return K.players<L.players end;return K.ping<L.ping end)elseif l=="random"then math.randomseed(os.time()+#x)local M=math.random(1,#x)local N=x[M]local v,O=pcall(function()b.TeleportService:TeleportToPlaceInstance(o,N.jobId,d.player)end)if not v then return false,"Teleport failed: "..tostring(O)end;return true,"Teleporting to random server"else table.sort(x,function(K,L)if K.ping==L.ping then return K.players<L.players end;return K.ping<L.ping end)end;local N=x[1]local v,O=pcall(function()b.TeleportService:TeleportToPlaceInstance(o,N.jobId,d.player)end)if not v then return false,"Teleport failed: "..tostring(O)end;return true,"Teleporting to server "..tostring(N.jobId)end;local P=c.Misc:AddLeftGroupbox("Server Panel","server")P:AddSlider("SERVER_MaxPlayers",{Text="Max Player Count",Min=1,Max=50,Default=20,Rounding=0})P:AddSlider("SERVER_MaxPing",{Text="Max Ping (ms)",Min=1,Max=1000,Default=200,Rounding=0})local Q={"Lowest Players","Lowest Ping","Random"}P:AddDropdown("SERVER_Filter",{Text="Filter",Values=Q,Default="Lowest Ping",Multi=false})local function R()local S=f.SERVER_Filter and f.SERVER_Filter.Value or"Lowest Ping"if S=="Lowest Players"then return"lowest_player"elseif S=="Random"then return"random"else return"lowest_ping"end end;local function T()local F=tonumber(f.SERVER_MaxPlayers and f.SERVER_MaxPlayers.Value)or nil;local U=tonumber(f.SERVER_MaxPing and f.SERVER_MaxPing.Value)or nil;local V=R()local v,W=k(V,F,U)if not v then e:Notify("[Server Hop] Failed: "..tostring(W),4)else e:Notify("[Server Hop] "..tostring(W),4)end end;P:AddButton({Text="Server Hop Once",Func=function()T()end})P:AddSlider("SERVER_AutoHopInterval",{Text="Auto Hop Interval (s)",Min=1,Max=600,Default=60,Rounding=0,Suffix="s"})local X=false;local function Y()X=false end;local function Z()if X then return end;X=true;task.spawn(function()while X and g.SERVER_AutoHop and g.SERVER_AutoHop.Value do local F=tonumber(f.SERVER_MaxPlayers and f.SERVER_MaxPlayers.Value)or nil;local U=tonumber(f.SERVER_MaxPing and f.SERVER_MaxPing.Value)or nil;local V=R()local v,W=k(V,F,U)if not v then e:Notify("[Auto Hop] Failed: "..tostring(W),4)else e:Notify("[Auto Hop] "..tostring(W),4)end;local _=tonumber(f.SERVER_AutoHopInterval and f.SERVER_AutoHopInterval.Value)or 60;_=math.clamp(_,1,600)local a0=0;while a0<_ do if not X or not(g.SERVER_AutoHop and g.SERVER_AutoHop.Value)then break end;task.wait(0.5)a0=a0+0.5 end end end)end;P:AddToggle("SERVER_AutoHop",{Text="Enable Auto Hop",Default=false,Tooltip="Automatically hops to a new server every interval using the selected filter."}):OnChanged(function(a1)if a1 then Z()else Y()end end)P:AddButton({Text="Rejoin Server",Func=function()e:Notify("Attempting to rejoin current server...",3)local v,O=pcall(function()b.TeleportService:TeleportToPlaceInstance(game.PlaceId,game.JobId,d.player)end)if not v then e:Notify("[Rejoin] Failed: "..tostring(O),4)end end})P:AddButton({Text="Copy Join Script",Func=function()setclipboard(([[game:GetService("TeleportService"):TeleportToPlaceInstance(%d, "%s", game:GetService("Players").LocalPlayer)]]):format(game.PlaceId,game.JobId))e:Notify("Join script copied!",3)end})local a2=c.Misc:AddRightGroupbox("Console","code")a2:AddButton({Text="Console",Func=function()e:Notify("Launched console.",3)loadstring(game:HttpGet("https://raw.githubusercontent.com/whodunitwww/noxhelpers/refs/heads/main/console.lua"))()end})local a3=c.Misc:AddRightGroupbox("Performance HUD","gauge")local a4={gui=nil,conn=nil,fpsSmooth=60,scale=1}local function a5()local v,a6=pcall(function()return rawget(getfenv(),"gethui")and gethui()or b.CoreGui or game:GetService("CoreGui")end)return v and a6 or b.Players.LocalPlayer:WaitForChild("PlayerGui")end;local function a7()if a4.conn then a4.conn:Disconnect()a4.conn=nil end;if a4.gui then a4.gui:Destroy()a4.gui=nil end end;local function a8()a7()local a9=a5()local aa=Instance.new("ScreenGui")aa.Name="CerberusHUD"aa.ResetOnSpawn=false;aa.IgnoreGuiInset=true;aa.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;aa.Parent=a9;a4.gui=aa;local ab=Instance.new("Frame")ab.Name="Holder"ab.AnchorPoint=Vector2.new(1,0)ab.Position=UDim2.new(1,-20,0,20)ab.Size=UDim2.fromOffset(320,100)ab.BackgroundColor3=Color3.fromRGB(29,30,36)ab.BackgroundTransparency=0.05;ab.Active=true;ab.Parent=aa;local ac=Instance.new("UICorner",ab)ac.CornerRadius=UDim.new(0,18)local ad=Instance.new("UIStroke",ab)ad.Thickness=2;ad.Transparency=0.3;ad.Color=Color3.fromRGB(92,94,104)local ae=Instance.new("ImageLabel")ae.Name="Shadow"ae.BackgroundTransparency=1;ae.Image="rbxassetid://5028857084"ae.ImageTransparency=0.6;ae.ScaleType=Enum.ScaleType.Slice;ae.SliceCenter=Rect.new(24,24,276,276)ae.Size=UDim2.new(1,24,1,24)ae.Position=UDim2.new(0,-12,0,-12)ae.ZIndex=0;ae.Parent=ab;local af=Instance.new("Frame")af.Name="Left"af.BackgroundTransparency=1;af.Size=UDim2.new(0.65,0,1,-20)af.Position=UDim2.new(0,20,0,10)af.Parent=ab;local ag=Instance.new("UIListLayout",af)ag.FillDirection=Enum.FillDirection.Vertical;ag.VerticalAlignment=Enum.VerticalAlignment.Center;ag.Padding=UDim.new(0,12)local function ah(ai)local i=Instance.new("Frame")i.BackgroundTransparency=1;i.Size=UDim2.new(1,0,0,34)local aj=Instance.new("TextLabel")aj.Name="Title"aj.BackgroundTransparency=1;aj.Font=Enum.Font.Gotham;aj.Text=ai;aj.TextColor3=Color3.fromRGB(172,175,185)aj.TextSize=16;aj.TextXAlignment=Enum.TextXAlignment.Left;aj.Size=UDim2.new(0.5,0,1,0)aj.Parent=i;local S=Instance.new("TextLabel")S.Name="Value"S.BackgroundTransparency=1;S.Font=Enum.Font.GothamSemibold;S.Text="--"S.TextColor3=Color3.fromRGB(238,239,244)S.TextSize=28;S.TextXAlignment=Enum.TextXAlignment.Left;S.Position=UDim2.new(0.5,0,0,0)S.Size=UDim2.new(0.5,0,1,0)S.Parent=i;return i,S end;local ak,al=ah("FPS")ak.Parent=af;local am,an=ah("Ping")am.Parent=af;local ao=Instance.new("ImageLabel")ao.Name="Icon"ao.BackgroundTransparency=1;ao.AnchorPoint=Vector2.new(1,0.5)ao.Position=UDim2.new(1,-24,0.5,0)ao.Size=UDim2.fromOffset(56,56)ao.Image="rbxassetid://136497541793809"ao.ImageColor3=Color3.fromRGB(55,235,120)ao.Parent=ab;local ap,aq,ar;ab.InputBegan:Connect(function(as)if as.UserInputType==Enum.UserInputType.MouseButton1 or as.UserInputType==Enum.UserInputType.Touch then ap,aq,ar=true,as.Position,ab.Position;as.Changed:Connect(function()if as.UserInputState==Enum.UserInputState.End then ap=false end end)end end)ab.InputChanged:Connect(function(as)if ap and(as.UserInputType==Enum.UserInputType.MouseMovement or as.UserInputType==Enum.UserInputType.Touch)then local at=as.Position-aq;ab.Position=UDim2.new(ar.X.Scale,ar.X.Offset+at.X,ar.Y.Scale,ar.Y.Offset+at.Y)end end)local au=game:GetService("Stats")local av=au and au.Network and au.Network.ServerStatsItem and au.Network.ServerStatsItem["Data Ping"]a4.conn=b.RunService.RenderStepped:Connect(h(function(aw)local ax=aw>0 and 1/aw or 60;a4.fpsSmooth=a4.fpsSmooth+(ax-a4.fpsSmooth)*0.2;al.Text=string.format("%d",math.clamp(math.floor(a4.fpsSmooth+0.5),1,1000))local ay;if av and av.GetValue then local v,S=pcall(function()return av:GetValue()end)if v and type(S)=="number"then ay=math.floor(S+0.5)end end;if not ay and av and av.GetValueString then local v,az=pcall(function()return av:GetValueString()end)if v and type(az)=="string"then ay=tonumber(az:match("(%d+)"))end end;an.Text=ay and ay.." ms"or"--"end))end;a3:AddToggle("HUD_Enable",{Text="Show FPS + Ping",Tooltip="Can only show up to 60 fps",Default=false,Callback=function(a1)if a1 then a8()else a7()end end})a3:AddSlider("HUD_Scale",{Text="HUD Scale",Default=90,Min=70,Max=150,Rounding=0,Suffix="%",Callback=function(S)a4.scale=S/100;if a4.gui and a4.gui:FindFirstChild("Holder")then local ab=a4.gui.Holder;ab.Size=UDim2.fromOffset(320*a4.scale,100*a4.scale)for B,aA in ipairs(ab:GetDescendants())do if aA:IsA("TextLabel")then if aA.Name=="Title"then aA.TextSize=16*a4.scale elseif aA.Name=="Value"then aA.TextSize=28*a4.scale end end end end end})local aB=c.Misc:AddRightGroupbox("Environment","trees")local aC,aD=false,Color3.fromRGB(128,128,128)local aE=b.Lighting and b.Lighting.Ambient or Color3.new()local aF,aG,aH=false,b.Lighting and b.Lighting.ClockTime or 12,nil;local function aI()if b.Lighting then b.Lighting.Ambient=aC and aD or aE end end;aB:AddToggle("ENV_Ambient",{Text="Custom Ambient",Default=false,Tooltip="Choose your own custom ambient color.",Callback=function(S)aC=S;aI()end})aB:AddLabel("Ambient Color"):AddColorPicker("ENV_AmbientColor",{Default=aD,Title="Ambient Color",Callback=function(aJ)aD=aJ;if aC then aI()end end})aB:AddToggle("ENV_TimeLock",{Text="Custom Time of Day",Default=false,Callback=function(a1)aF=a1;if a1 then if b.Lighting then b.Lighting.ClockTime=aG end;if not aH then aH=b.RunService.RenderStepped:Connect(h(function()if b.Lighting then b.Lighting.ClockTime=aG end end))end;e:Notify("Time of Day locked.",3)else if aH then aH:Disconnect()aH=nil end;e:Notify("Time of Day unlocked.",3)end end})aB:AddSlider("ENV_Time",{Text="Time of Day",Default=aG,Min=0,Max=24,Rounding=2,Suffix="h",Callback=function(S)aG=S;if aF and b.Lighting then b.Lighting.ClockTime=S end end})local function aK()if aH then aH:Disconnect()aH=nil end;if b.Lighting then b.Lighting.Ambient=aE end end;local aL=c.Misc:AddRightGroupbox("Auto Chat","message-circle")local aM;local aN=false;aL:AddToggle("autoChatEnabled",{Text="Auto Chat",Default=false,Callback=function(aO)aN=aO;if aO then task.spawn(function()while aN do local W=f.autoChatMessage.Value;local _=tonumber(f.autoChatInterval.Value)or 5;if W and W:match("%S")then local aP=game:GetService("TextChatService").TextChannels:FindFirstChild("RBXGeneral")if aP then pcall(function()aP:SendAsync(W)end)end else e:Notify("Your message can't be empty.",3)aN=false;g.autoChatEnabled:SetValue(false)break end;task.wait(_)end end)else end end})aL:AddInput("autoChatMessage",{Default="Hello Everyone!",Numeric=false,Finished=false,ClearTextOnFocus=true,Text="Message",Callback=function(aQ)end})aL:AddSlider("autoChatInterval",{Text="Chat Interval (s)",Default=10,Min=1,Max=120,Rounding=1,Suffix="s",Callback=function(aQ)end})local aR=b.TextChatService;local aS=b.CoreGui;local aT=b.Players.LocalPlayer;local aU={enabled=false,selected={["Hide Own Name"]=false,["Hide Others Names"]=false,["Hide Own Skin"]=false,["Hide Others Skins"]=false},_cons={},_chatConn=nil,_legacyChatConns={},_uiLoop=nil,_uiScrub=nil,_nameDDT={},_skin={},_nameCache={},_descAddedConn=nil}local function aV(aW)return typeof(aW)=="Instance"and aW.Parent~=nil end;local function aX(aY)local aJ=aY and aY.Character;if aV(aJ)then return aJ end;return nil end;local function aZ(a9,a_)if not aV(a9)then return nil end;local v,u=pcall(function()return a9:FindFirstChildOfClass(a_)end)if v and aV(u)then return u end;return nil end;local function b0(a9,b1)if not aV(a9)then return nil end;local v,u=pcall(function()return a9:FindFirstChild(b1)end)if v and aV(u)then return u end;return nil end;local function b2(b3)local b4=aZ(b3,"Humanoid")if b4 and b4.Health>0 then return b4 end;return nil end;local function b5(az)return az:gsub("([^%w])","%%%1")end;local function b6(aY,b7)local b3=aX(aY)local b8=b2(b3)if not b8 then return end;local b9=aY.UserId;if b7 then if aU._nameDDT[b9]==nil then aU._nameDDT[b9]=b8.DisplayDistanceType end;b8.DisplayDistanceType=Enum.HumanoidDisplayDistanceType.None else b8.DisplayDistanceType=aU._nameDDT[b9]or Enum.HumanoidDisplayDistanceType.Viewer end end;local function ba(aY)if not aY then return end;local b9=aY.UserId;if not aU._nameCache[b9]then aU._nameCache[b9]={Name=aY.Name,Display=aY.DisplayName}end end;local function bb(aY)if not aY then return end;ba(aY)pcall(function()aY.Name="???"end)pcall(function()aY.DisplayName="???"end)end;local function bc(aY)if not aY then return end;local b9=aY.UserId;local bd=aU._nameCache[b9]if not bd then return end;pcall(function()aY.Name=bd.Name end)pcall(function()aY.DisplayName=bd.Display end)end;local function be()local bf={}local bg=aU.selected["Hide Own Name"]local bh=aU.selected["Hide Others Names"]if not(bg or bh)then return bf end;local function bi(bj)if bj and bj~=""then bf[bj]="???"end end;for B,bk in ipairs(b.Players:GetPlayers())do local bl=bk==aT;if bl and bg or not bl and bh then local b9=bk.UserId;local bm=aU._nameCache[b9]if bm then bi(bm.Name)bi(bm.Display)bi("@"..bm.Name)bi("@"..bm.Display)else bi(bk.Name)bi(bk.DisplayName)bi("@"..bk.Name)bi("@"..bk.DisplayName)end end end;return bf end;local function bn(bo,bf)if not bo or bo==""then return bo end;local bp=bo;for bq,br in pairs(bf)do bp=bp:gsub(b5(bq),br)end;return bp end;local function bs(bt,bf)if bt:IsA("TextLabel")or bt:IsA("TextButton")or bt:IsA("TextBox")then if bt.Text and#bt.Text>0 then local bu=bn(bt.Text,bf)if bu~=bt.Text then bt.Text=bu end end end end;local function bv()if aU._uiScrub then aU._uiScrub:Disconnect()end;local aj=0;aU._uiScrub=b.RunService.RenderStepped:Connect(function(aw)if not aU.enabled then return end;aj=aj+aw;if aj<0.25 then return end;aj=0;local bf=be()if next(bf)==nil then return end;local function bw(bx)if not aV(bx)then return end;for B,by in ipairs(bx:GetDescendants())do if by:IsA("TextLabel")or by:IsA("TextButton")or by:IsA("TextBox")then bs(by,bf)elseif by:IsA("BillboardGui")then for B,bz in ipairs(by:GetDescendants())do if bz:IsA("TextLabel")then bs(bz,bf)end end end end end;bw(aS)if aT and aV(aT)then local bA=b0(aT,"PlayerGui")if bA then bw(bA)end end end)if aU._descAddedConn then aU._descAddedConn:Disconnect()end;aU._descAddedConn=game.DescendantAdded:Connect(function(bB)if not aU.enabled then return end;local bf=be()if next(bf)==nil then return end;pcall(function()if bB:IsA("TextLabel")or bB:IsA("TextButton")or bB:IsA("TextBox")then bs(bB,bf)elseif bB:IsA("BillboardGui")then for B,bz in ipairs(bB:GetDescendants())do if bz:IsA("TextLabel")then bs(bz,bf)end end end end)end)end;local function bC()if aU._uiScrub then aU._uiScrub:Disconnect()end;aU._uiScrub=nil;if aU._descAddedConn then aU._descAddedConn:Disconnect()end;aU._descAddedConn=nil end;local function bD(aY)if not aY then return end;aU._skin[aY.UserId]=nil end;local function bE(aY,b3)if not(aY and aV(b3))then return end;local b9=aY.UserId;if aU._skin[b9]then return end;local bF={acc={},shirt=nil,pants=nil,tshirt=nil,colors=nil}for B,aW in ipairs(b3:GetChildren())do if aW:IsA("Accessory")then table.insert(bF.acc,aW)end end;bF.shirt=aZ(b3,"Shirt")bF.pants=aZ(b3,"Pants")bF.tshirt=aZ(b3,"ShirtGraphic")local bG=aZ(b3,"BodyColors")if bG then bF.colors={Head=bG.HeadColor3,LA=bG.LeftArmColor3,RA=bG.RightArmColor3,LL=bG.LeftLegColor3,RL=bG.RightLegColor3,Torso=bG.TorsoColor3}end;aU._skin[b9]=bF end;local function bH(aY)local b3=aX(aY)if not b3 then return end;bE(aY,b3)for B,aW in ipairs(b3:GetChildren())do if aW:IsA("Accessory")and aV(aW)then aW.Parent=nil end end;local az=aZ(b3,"Shirt")local bk=aZ(b3,"Pants")local aj=aZ(b3,"ShirtGraphic")if az then az.Parent=nil end;if bk then bk.Parent=nil end;if aj then aj.Parent=nil end;local bG=aZ(b3,"BodyColors")if bG then local bI=Color3.fromRGB(130,130,130)pcall(function()bG.HeadColor3=bI;bG.LeftArmColor3=bI;bG.RightArmColor3=bI;bG.LeftLegColor3=bI;bG.RightLegColor3=bI;bG.TorsoColor3=bI end)end end;local function bJ(aY)local b3=aX(aY)if not b3 then return end;local bF=aU._skin[aY.UserId]if not bF then return end;if bF.shirt and bF.shirt.Parent==nil then bF.shirt.Parent=b3 end;if bF.pants and bF.pants.Parent==nil then bF.pants.Parent=b3 end;if bF.tshirt and bF.tshirt.Parent==nil then bF.tshirt.Parent=b3 end;for B,bK in ipairs(bF.acc)do if aV(bK)and bK.Parent==nil then bK.Parent=b3 end end;local bG=aZ(b3,"BodyColors")if bG and bF.colors then pcall(function()bG.HeadColor3=bF.colors.Head;bG.LeftArmColor3=bF.colors.LA;bG.RightArmColor3=bF.colors.RA;bG.LeftLegColor3=bF.colors.LL;bG.RightLegColor3=bF.colors.RL;bG.TorsoColor3=bF.colors.Torso end)end end;local function bL(aY)if not aU.enabled then return end;local bl=aY==aT;local bM=aU.selected["Hide Own Name"]local bN=aU.selected["Hide Others Names"]if bl and bM or not bl and bN then bb(aY)b6(aY,true)else bc(aY)b6(aY,false)end;local bO=aU.selected["Hide Own Skin"]local bP=aU.selected["Hide Others Skins"]if bl and bO or not bl and bP then bH(aY)else bJ(aY)end end;local function bQ()local function bR(aY)bc(aY)b6(aY,false)bJ(aY)end;if aT then bR(aT)end;for B,bk in ipairs(b.Players:GetPlayers())do if bk~=aT then bR(bk)end end end;local function bS()if not aU.enabled then bQ()return end;if aT then bL(aT)end;for B,bk in ipairs(b.Players:GetPlayers())do if bk~=aT then bL(bk)end end end;local function bT()if aU._chatConn then aU._chatConn:Disconnect()end;for B,aJ in ipairs(aU._legacyChatConns)do pcall(function()aJ:Disconnect()end)end;aU._legacyChatConns={}aU._chatConn=nil;if aR and aR.ChatVersion==Enum.ChatVersion.TextChatService then aU._chatConn=aR.OnIncomingMessage:Connect(function(W)if not(aU.enabled and W)then return end;local bU=W.TextSource;if not bU then return end;local aY=b.Players:GetPlayerByUserId(bU.UserId)if not aY then return end;local bl=aY==aT;local bg=aU.selected["Hide Own Name"]local bh=aU.selected["Hide Others Names"]if bl and bg or not bl and bh then local bV=Instance.new("TextChatMessageProperties")bV.PrefixText="???:"local bf=be()bV.Text=bn(W.Text or"",bf)return bV end end)return end;local bW=b.ReplicatedStorage;local bX=bW and b0(bW,"DefaultChatSystemChatEvents")if bX then local bY=b0(bX,"OnMessageDoneFiltering")if bY and bY.OnClientEvent then table.insert(aU._legacyChatConns,bY.OnClientEvent:Connect(function(A)if not(aU.enabled and A)then return end;local bZ=A.FromSpeaker;local aY=bZ and b.Players:FindFirstChild(bZ)if not aY then return end;local bl=aY==aT;local bg=aU.selected["Hide Own Name"]local bh=aU.selected["Hide Others Names"]if bl and bg or not bl and bh then A.FromSpeaker="???"if A.Message then local bf=be()A.Message=bn(A.Message,bf)end;A.ExtraData=A.ExtraData or{}end end))end end end;local function b_()for B,aJ in ipairs(aU._cons)do pcall(function()aJ:Disconnect()end)end;aU._cons={}if aU._chatConn then aU._chatConn:Disconnect()end;aU._chatConn=nil;for B,aJ in ipairs(aU._legacyChatConns)do pcall(function()aJ:Disconnect()end)end;aU._legacyChatConns={}bC()end;local function c0()b_()table.insert(aU._cons,aT.CharacterAdded:Connect(function()bD(aT)task.defer(bS)end))table.insert(aU._cons,b.Players.PlayerAdded:Connect(function(aY)table.insert(aU._cons,aY.CharacterAdded:Connect(function()bD(aY)task.defer(function()bL(aY)end)end))if aY.Character then bD(aY)task.defer(function()bL(aY)end)end end))for B,aY in ipairs(b.Players:GetPlayers())do if aY~=aT then table.insert(aU._cons,aY.CharacterAdded:Connect(function()bD(aY)task.defer(function()bL(aY)end)end))if aY.Character then bD(aY)task.defer(function()bL(aY)end)end end end;bT()bv()end;local c1=c.Misc:AddLeftGroupbox("Streamer Mode","video")local c2={"Hide Own Name","Hide Others Names","Hide Own Skin","Hide Others Skins"}c1:AddDropdown("streamer_mode_options",{Text="Affects",Values=c2,Multi=true,Default={},AllowNull=true,Callback=function(c3)for c4 in pairs(aU.selected)do aU.selected[c4]=false end;if typeof(c3)=="table"then local c5=false;for c4,S in pairs(c3)do if type(S)=="boolean"then c5=true;if S and aU.selected[c4]~=nil then aU.selected[c4]=true end end end;if not c5 then for B,S in ipairs(c3)do if aU.selected[S]~=nil then aU.selected[S]=true end end end end;if aU.enabled then bS()end end})c1:AddToggle("streamer_mode_toggle",{Text="Enable Streamer Mode",Default=false,Callback=function(a1)aU.enabled=a1;if a1 then e:Notify("Please open the roblox menu briefly for the best results.",3)c0()bS()else bS()b_()end end})local c6=c.Misc:AddLeftGroupbox("Spectate","view")local c7,c8,c9,ca;local cb=c6:AddDropdown("SpectateTarget",{Values={},Default=nil,Multi=false,Text="Select Player"})c6:AddButton({Text="Refresh Players",Func=function()local aj={}for B,cc in ipairs(b.Players:GetPlayers())do if cc~=d.player then aj[#aj+1]=cc.Name end end;cb:SetValues(aj)end})local cd=c6:AddToggle("SpectateEnabled",{Text="Spectate Player",Default=false})local function ce()if c7 then c7:Disconnect()c7=nil end;c8=nil;if d.humanoid then d.camera.CameraSubject=d.humanoid end end;local function cf(cg)ce()c8=cg;if not c8 then return end;c7=b.RunService.RenderStepped:Connect(h(function()local b3=c8.Character;if b3 and b3:FindFirstChild("Humanoid")then d.camera.CameraSubject=b3:FindFirstChild("Humanoid")else ce()cd:SetValue(false)end end))end;cd:OnChanged(function()if cd.Value then local b1=cb.Value;local cg=b1 and b.Players:FindFirstChild(b1)if cg then cf(cg)else e:Notify("Select a player to spectate.",3)cd:SetValue(false)end else ce()end end)cb:OnChanged(function(b1)if cd.Value then local cg=b1 and b.Players:FindFirstChild(b1)if cg then cf(cg)end end end)c9=b.Players.PlayerAdded:Connect(function()local aj={}for B,cc in ipairs(b.Players:GetPlayers())do if cc~=d.player then aj[#aj+1]=cc.Name end end;cb:SetValues(aj)end)ca=b.Players.PlayerRemoving:Connect(function(ch)local aj={}for B,cc in ipairs(b.Players:GetPlayers())do if cc~=d.player and cc~=ch then aj[#aj+1]=cc.Name end end;cb:SetValues(aj)if c8==ch then cd:SetValue(false)end end)do local aj={}for B,cc in ipairs(b.Players:GetPlayers())do if cc~=d.player then aj[#aj+1]=cc.Name end end;cb:SetValues(aj)end;j.SmartServerHop=k;function j.Unload()Y()a7()aK()ce()if c9 then c9:Disconnect()c9=nil end;if ca then ca:Disconnect()ca=nil end;if g.SERVER_AutoHop and g.SERVER_AutoHop.Value then g.SERVER_AutoHop:SetValue(false)end;aN=false;if g.autoChatEnabled and g.autoChatEnabled.Value then g.autoChatEnabled:SetValue(false)end;if aU.enabled then aU.enabled=false;pcall(b_)pcall(bQ)end;if g.streamer_mode_toggle and g.streamer_mode_toggle.Value then g.streamer_mode_toggle:SetValue(false)end end;return j end
