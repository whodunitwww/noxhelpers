return function(a)local b=a.Services;local c=a.Tabs;local d=a.References;local e=a.Library;local f=a.Options;local g=a.Toggles;local h=game:GetService("SoundService")local i=game:GetService("HttpService")if makefolder then pcall(makefolder,"Cerberus")end;local j="Cerberus/MusicCache"if makefolder then pcall(makefolder,j)end;local k="Cerberus/music.json"local l={{name="Never Gonna Give You Up",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Rick_Astley_-_Never_Gonna_Give_You_Up__Official_Video___4K_Remaster_.mp3?inline=false"},{name="Running in the 90s",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Initial_D_-_Running_in_The_90s.mp3?inline=false"},{name="Phonk 1",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/MONTAGEM_SUPERSONIC__Slowed_Reverb___BRAZILIAN_PHONK_.mp3?inline=false"},{name="Phonk 2",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/ENVY_-_SLXUGHTER__SLOWED_REVERB___BRAZILIAN_PHONK_.mp3?inline=false"},{name="The Blinding Lights",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/The_Weeknd_-_Blinding_Lights__Official_Audio_.mp3?inline=false"},{name="Shape of You",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Ed_Sheeran_-_Shape_of_You__Official_Music_Video_.mp3?inline=false"},{name="Billie Jean",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Michael_Jackson_-_Billie_Jean__Official_Video_.mp3?inline=false"},{name="Bohemian Rhapsody",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Queen_Bohemian_Rhapsody__Official_Video_Remastered_.mp3?inline=false"},{name="Thunderstruck",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/ACDC_-_Thunderstruck__Official_Video_.mp3?inline=false"},{name="Smooth Criminal",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Michael_Jackson_-_Smooth_Criminal__Official_Video_.mp3?inline=false"},{name="Kung Fu Fighting",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Carl_Douglas_Kung_Fu_Fighting__Original_Music_Video_.mp3?inline=false"},{name="Livin' On A Prayer",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Bon_Jovi_-_Livin__On_A_Prayer.mp3?inline=false"},{name="Highway to Hell",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/highwayToHell.mp3?inline=false"},{name="God's Plan",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Drake_-_God_s_Plan.mp3?inline=false"},{name="California Gurls",url="https://gitlab.com/main5015442/scripts/-/raw/main/music/Katy_Perry_-_California_Gurls__Official_Music_Video__ft._Snoop_Dogg.mp3?inline=false"}}local function m(n)local o={function(p)return syn and syn.request and syn.request({Url=p,Method="GET"})end,function(p)return request and request({Url=p,Method="GET"})end,function(p)return http_request and http_request({Url=p,Method="GET"})end,function(p)return http and http.request and http.request({Url=p,Method="GET"})end}for q,r in ipairs(o)do local s,t=pcall(r,n)if s and t and(t.Body or t.body)then return true,t.Body or t.body end end;return false,"No HTTP function (syn.request/request/http_request/http.request)"end;local function u(v,w)if not writefile then return false,"writefile missing"end;local s,x=pcall(function()writefile(v,w)end)if not s then return false,tostring(x)end;return true end;local function y(z)local A=5381;for B=1,#z do A=(A*33+string.byte(z,B))%4294967296 end;return string.format("%08x",A)end;local function C(n)local D=n:match("%.([A-Za-z0-9]+)%f[%z%?%#]")or"bin"D=D:lower()if D~="mp3"and D~="ogg"and D~="wav"then D="mp3"end;return("%s/%s.%s"):format(j,y(n),D)end;local function E(v)if getsynasset then local s,F=pcall(getsynasset,v)if s and F and#F>0 then return true,F end end;if getsynfile then local s,F=pcall(getsynfile,v)if s and F and#F>0 then return true,F end end;return false,"No getsynasset/getsynfile"end;local function G()if isfile and isfile(k)then local s,H=pcall(readfile,k)if s and type(H)=="string"and#H>0 then local I,J=pcall(function()return i:JSONDecode(H)end)if I and type(J)=="table"then return J end end end;if writefile then pcall(function()writefile(k,i:JSONEncode(l))end)end;return table.clone(l)end;local function K(L)if not(writefile and L)then return end;pcall(function()writefile(k,i:JSONEncode(L))end)end;local M=G()local N=h:FindFirstChild("CerberusMusic")or Instance.new("Folder")N.Name="CerberusMusic"N.Parent=h;for q,O in ipairs(h:GetDescendants())do if O:IsA("Sound")and O:GetAttribute("CerberusMusic")==true then pcall(function()O:Stop()end)pcall(function()O:Destroy()end)end end;local P=N:FindFirstChild("MAIN")if not(P and P:IsA("Sound"))then P=Instance.new("Sound")P.Name="MAIN"P.Parent=N end;P:SetAttribute("CerberusMusic",true)local Q=nil;local R=nil;local S="idle"local T=nil;local U=nil;local V=c.Fun:AddLeftGroupbox("Music Player","music")local function W(X,Y)local F=Y;if X then F=X.Value or X.CurrentValue or X.Current or Y end;if type(F)~="number"then F=Y end;return F end;local function Z(_,Y)if _==nil then return Y end;local F=_.Value~=nil and _.Value or(_.Current~=nil and _.Current or Y)return not not F end;local function a0()if Q then pcall(function()Q:Disconnect()end)Q=nil end end;local function a1()R=nil;a0()pcall(function()P:Stop()end)U=nil;S="idle"T=nil end;local function a2(n)local v=C(n)if not(isfile and isfile(v))then local s,a3=m(n)if not s then return false,"Download failed: "..tostring(a3)end;local a4,a5=u(v,a3)if not a4 then return false,"Write failed: "..tostring(a5)end end;local a6,a7=E(v)if not a6 then return false,a7 end;return true,a7 end;local function a8()if not P then return end;local a9=W(f.MusicSpeed,10)local aa=W(f.MusicVolume,10)local ab=W(f.MusicPitch,10)local ac=Z(g.MusicLooped,false)local ad=math.clamp(a9/10,0.1,2.0)local ae=math.clamp(ab/10,0.1,2.0)local af=math.clamp(aa/10,0.0,2.0)P.PlaybackSpeed=ad*ae;P.Volume=af;P.Looped=ac end;local function ag()a8()end;local function ah(ai,aj)if#M==0 then return end;ai=math.clamp(ai,1,#M)T=ai;local ak=M[ai]if not ak or not ak.url or ak.url==""then return end;a0()pcall(function()P:Stop()end)P.TimePosition=0;local s,al=a2(ak.url)if not s then e:Notify("⚠️ "..(ak.name or"Track "..ai)..": "..tostring(al),5)return end;a8()P.SoundId=al;P:SetAttribute("CerberusMusic",true)local am=pcall(function()P:Play()end)if not am then e:Notify("⚠️ Could not start: "..(ak.name or"Track "..ai),5)return end;U=ak.name or"Track "..ai;e:Notify("▶ Now playing: "..U,3)local an={}R=an;if aj=="order"then Q=P.Ended:Connect(function()if R~=an or S~="order"then return end;local ao=T+1;if ao>#M then ao=1 end;ah(ao,"order")end)elseif aj=="shuffle"then Q=P.Ended:Connect(function()if R~=an or S~="shuffle"then return end;local ap,ao=#M,1;if ap==1 then ao=1 else repeat ao=math.random(1,ap)until ao~=T end;ah(ao,"shuffle")end)end end;local function aq(L)local J={}for B=1,#L do J[#J+1]=L[B]and L[B].name or"Track "..B end;return#J>0 and J or{"---"}end;local ar=V:AddDropdown("MUSIC_List",{Text="Music List",Values=aq(M),Default=M[1]and M[1].name or"---",Multi=false})local function as(at)if not at then return 1 end;for B=1,#M do if M[B].name==at then return B end end;return 1 end;local function au()if#M==0 then return e:Notify("No songs in list.",3)end;S="order"R={}local av=ar and ar.Value and as(ar.Value)or(T or 1)ah(av,"order")end;local function aw()if#M==0 then return e:Notify("No songs in list.",3)end;S="shuffle"R={}local ap=#M;local av;if ap==1 then av=1 else repeat av=math.random(1,ap)until av~=T end;ah(av,"shuffle")end;V:AddButton({Text="Play Music (Order)",Func=au})V:AddButton({Text="Play Music (Shuffled)",Func=aw})V:AddButton({Text="Stop Music",Func=function()a1()e:Notify("⏹ Stopped.",2)end})V:AddDivider()V:AddInput("MUSIC_URL",{Text="Music URL",Placeholder="https://... .mp3 / .ogg / .wav",ClearTextOnFocus=false,Finished=false})V:AddInput("MUSIC_NAME",{Text="Music Name",Placeholder="Enter Name",ClearTextOnFocus=false,Finished=false})local ax;local function ay(az)local aA=aq(M)if ar and ar.SetValues then ar:SetValues(aA)local aB=az;if not aB and ar.Value and table.find(aA,ar.Value)then aB=ar.Value end;ar:SetValue(aB or aA[1])end;if ax and ax.SetValues then ax:SetValues(aA)local aC=aA[1]if ax.Value and table.find(aA,ax.Value)then aC=ax.Value end;ax:SetValue(aC)end end;V:AddButton({Text="Add Music To Music List",Func=function()local n=tostring(f.MUSIC_URL and f.MUSIC_URL.Value or""):gsub("^%s+",""):gsub("%s+$","")local aD=tostring(f.MUSIC_NAME and f.MUSIC_NAME.Value or""):gsub("^%s+",""):gsub("%s+$","")if n==""or not n:match("^https?://")then return e:Notify("Enter a valid http(s) URL to an .mp3/.ogg/.wav.",3)end;if aD==""then aD="Track "..y(n)end;M[#M+1]={name=aD,url=n}K(M)ay(aD)if f.MUSIC_URL and f.MUSIC_URL.SetValue then f.MUSIC_URL:SetValue("")end;if f.MUSIC_NAME and f.MUSIC_NAME.SetValue then f.MUSIC_NAME:SetValue("")end;e:Notify(("➕ Added: %s"):format(aD),3)end})ax=V:AddDropdown("MUSIC_Remove",{Text="Remove Sound",Values=aq(M),Default=#M>0 and M[1].name or"---"})V:AddButton({Text="Remove Selected Sound",Func=function()local aE=ax.Value;if not aE or aE=="---"then return e:Notify("Select a track to remove.",3)end;for B=#M,1,-1 do if M[B].name==aE then table.remove(M,B)end end;K(M)ay()e:Notify("🗑 Removed: "..aE,3)end})local aF=c.Fun:AddLeftGroupbox("Music Config","sliders-vertical")V:AddDivider()aF:AddSlider("MusicSpeed",{Text="Playback Speed",Default=10,Min=1,Max=20,Rounding=0,Callback=ag})aF:AddSlider("MusicVolume",{Text="Volume",Default=10,Min=0,Max=20,Rounding=0,Callback=ag})aF:AddSlider("MusicPitch",{Text="Pitch",Default=10,Min=1,Max=20,Rounding=0,Callback=ag})aF:AddToggle("MusicLooped",{Text="Music Looped",Default=false,Callback=ag})if f.MusicSpeed and f.MusicSpeed.OnChanged then f.MusicSpeed:OnChanged(ag)end;if f.MusicVolume and f.MusicVolume.OnChanged then f.MusicVolume:OnChanged(ag)end;if f.MusicPitch and f.MusicPitch.OnChanged then f.MusicPitch:OnChanged(ag)end;if g.MusicLooped and g.MusicLooped.OnChanged then g.MusicLooped:OnChanged(ag)end;local aG=c.Fun:AddRightGroupbox("Emotes","party-popper")aG:AddButton({Text="Launch Emote Player",Func=function()e:Notify("Created by Droply!",4)writefile("dropemote_key.txt",[[¯\_(ツ)_/¯]])loadstring(game:HttpGet("https://raw.githubusercontent.com/whodunitwww/noxhelpers/refs/heads/main/droply/emotes.lua"))()end})end
