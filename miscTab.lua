return function(a)local b=a.Services;local c=a.Tabs;local d=a.References;local e=a.Library;local f=a.Options;local g=a.Toggles;local h=a.LPH_NO_VIRTUALIZE or function(i)return i end;local j=c.Misc:AddRightGroupbox("Console","code")j:AddButton({Text="Console",Func=function()e:Notify("Launched console.",3)loadstring(game:HttpGet("https://raw.githubusercontent.com/whodunitwww/noxhelpers/refs/heads/main/console.lua"))()end})local k=c.Misc:AddRightGroupbox("Performance HUD","gauge")local l={gui=nil,conn=nil,fpsSmooth=60,scale=1}local function m()local n,o=pcall(function()return rawget(getfenv(),"gethui")and gethui()or b.CoreGui or game:GetService("CoreGui")end)return n and o or b.Players.LocalPlayer:WaitForChild("PlayerGui")end;local function p()if l.conn then l.conn:Disconnect()l.conn=nil end;if l.gui then l.gui:Destroy()l.gui=nil end end;local function q()p()local r=m()local s=Instance.new("ScreenGui")s.Name="CerberusHUD"s.ResetOnSpawn=false;s.IgnoreGuiInset=true;s.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;s.Parent=r;l.gui=s;local t=Instance.new("Frame")t.Name="Holder"t.AnchorPoint=Vector2.new(1,0)t.Position=UDim2.new(1,-20,0,20)t.Size=UDim2.fromOffset(320,100)t.BackgroundColor3=Color3.fromRGB(29,30,36)t.BackgroundTransparency=0.05;t.Active=true;t.Parent=s;local u=Instance.new("UICorner",t)u.CornerRadius=UDim.new(0,18)local v=Instance.new("UIStroke",t)v.Thickness=2;v.Transparency=0.3;v.Color=Color3.fromRGB(92,94,104)local w=Instance.new("ImageLabel")w.Name="Shadow"w.BackgroundTransparency=1;w.Image="rbxassetid://5028857084"w.ImageTransparency=0.6;w.ScaleType=Enum.ScaleType.Slice;w.SliceCenter=Rect.new(24,24,276,276)w.Size=UDim2.new(1,24,1,24)w.Position=UDim2.new(0,-12,0,-12)w.ZIndex=0;w.Parent=t;local x=Instance.new("Frame")x.Name="Left"x.BackgroundTransparency=1;x.Size=UDim2.new(0.65,0,1,-20)x.Position=UDim2.new(0,20,0,10)x.Parent=t;local y=Instance.new("UIListLayout",x)y.FillDirection=Enum.FillDirection.Vertical;y.VerticalAlignment=Enum.VerticalAlignment.Center;y.Padding=UDim.new(0,12)local function z(A)local i=Instance.new("Frame")i.BackgroundTransparency=1;i.Size=UDim2.new(1,0,0,34)local B=Instance.new("TextLabel")B.Name="Title"B.BackgroundTransparency=1;B.Font=Enum.Font.Gotham;B.Text=A;B.TextColor3=Color3.fromRGB(172,175,185)B.TextSize=16;B.TextXAlignment=Enum.TextXAlignment.Left;B.Size=UDim2.new(0.5,0,1,0)B.Parent=i;local C=Instance.new("TextLabel")C.Name="Value"C.BackgroundTransparency=1;C.Font=Enum.Font.GothamSemibold;C.Text="--"C.TextColor3=Color3.fromRGB(238,239,244)C.TextSize=28;C.TextXAlignment=Enum.TextXAlignment.Left;C.Position=UDim2.new(0.5,0,0,0)C.Size=UDim2.new(0.5,0,1,0)C.Parent=i;return i,C end;local D,E=z("FPS")D.Parent=x;local F,G=z("Ping")F.Parent=x;local H=Instance.new("ImageLabel")H.Name="Icon"H.BackgroundTransparency=1;H.AnchorPoint=Vector2.new(1,0.5)H.Position=UDim2.new(1,-24,0.5,0)H.Size=UDim2.fromOffset(56,56)H.Image="rbxassetid://136497541793809"H.ImageColor3=Color3.fromRGB(55,235,120)H.Parent=t;local I,J,K;t.InputBegan:Connect(function(L)if L.UserInputType==Enum.UserInputType.MouseButton1 or L.UserInputType==Enum.UserInputType.Touch then I,J,K=true,L.Position,t.Position;L.Changed:Connect(function()if L.UserInputState==Enum.UserInputState.End then I=false end end)end end)t.InputChanged:Connect(function(L)if I and(L.UserInputType==Enum.UserInputType.MouseMovement or L.UserInputType==Enum.UserInputType.Touch)then local M=L.Position-J;t.Position=UDim2.new(K.X.Scale,K.X.Offset+M.X,K.Y.Scale,K.Y.Offset+M.Y)end end)local N=game:GetService("Stats")local O=N and N.Network and N.Network.ServerStatsItem and N.Network.ServerStatsItem["Data Ping"]l.conn=b.RunService.RenderStepped:Connect(h(function(P)local Q=P>0 and 1/P or 60;l.fpsSmooth=l.fpsSmooth+(Q-l.fpsSmooth)*0.2;E.Text=string.format("%d",math.clamp(math.floor(l.fpsSmooth+0.5),1,1000))local R;if O and O.GetValue then local n,C=pcall(function()return O:GetValue()end)if n and type(C)=="number"then R=math.floor(C+0.5)end end;if not R and O and O.GetValueString then local n,S=pcall(function()return O:GetValueString()end)if n and type(S)=="string"then R=tonumber(S:match("(%d+)"))end end;G.Text=R and R.." ms"or"--"end))end;k:AddToggle("HUD_Enable",{Text="Show FPS + Ping",Tooltip="Can only show up to 60 fps",Default=false,Callback=function(T)if T then q()else p()end end})k:AddSlider("HUD_Scale",{Text="HUD Scale",Default=90,Min=70,Max=150,Rounding=0,Suffix="%",Callback=function(C)l.scale=C/100;if l.gui and l.gui:FindFirstChild("Holder")then local t=l.gui.Holder;t.Size=UDim2.fromOffset(320*l.scale,100*l.scale)for U,V in ipairs(t:GetDescendants())do if V:IsA("TextLabel")then if V.Name=="Title"then V.TextSize=16*l.scale elseif V.Name=="Value"then V.TextSize=28*l.scale end end end end end})local W=c.Misc:AddLeftGroupbox("Server Panel","server")local function X(Y)local Z=("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100%s"):format(game.PlaceId,Y and"&cursor="..b.HttpService:UrlEncode(Y)or"")local n,_=pcall(function()return b.HttpService:JSONDecode(game:HttpGet(Z))end)return n and _ or nil end;W:AddButton({Text="Rejoin Server",Func=function()e:Notify("Rejoining server...",1)if game.PlaceId and game.JobId and d.player then b.TeleportService:TeleportToPlaceInstance(game.PlaceId,game.JobId,d.player)else e:Notify("Rejoin failed: missing ids",4)end end})W:AddButton({Text="Join Random Server",Func=function()e:Notify("Joining random server...",1)local Y=nil;for U=1,5 do local _=X(Y)if not _ or not _.data then break end;local a0={}for U,a1 in ipairs(_.data)do if a1.id~=game.JobId and a1.playing<a1.maxPlayers then table.insert(a0,a1)end end;if#a0>0 then local a2=a0[math.random(1,#a0)]return b.TeleportService:TeleportToPlaceInstance(game.PlaceId,a2.id,d.player)end;Y=_.nextPageCursor;if not Y then break end end;e:Notify("Couldn't find an available server.",5)end})W:AddButton({Text="Join Lowest Server",Func=function()e:Notify("Joining lowest server...",1)local Y,a3,a4=nil,nil,math.huge;for U=1,6 do local _=X(Y)if not _ or not _.data then break end;for U,a1 in ipairs(_.data)do if a1.id~=game.JobId and a1.playing<a1.maxPlayers and a1.playing<a4 then a3,a4=a1,a1.playing end end;Y=_.nextPageCursor;if not Y then break end end;if a3 then b.TeleportService:TeleportToPlaceInstance(game.PlaceId,a3.id,d.player)else e:Notify("No suitable server with fewer players.",5)end end})W:AddButton({Text="Copy Join Script",Func=function()if setclipboard then pcall(setclipboard,("game:GetService('TeleportService'):TeleportToPlaceInstance(%d,%q,game.Players.LocalPlayer)\n"):format(game.PlaceId,game.JobId))e:Notify("Copied current-server join script.",4)else e:Notify("Clipboard not available.",4)end end})W:AddDivider()local a5={enabled=false,thread=nil}local function a6()a5.enabled=false;a5.thread=nil;if g.SERVER_AutoHop then pcall(function()g.SERVER_AutoHop:SetValue(false)end)end end;local function a7()if a5.thread then return end;a5.enabled=true;a5.thread=task.spawn(function()while a5.enabled and g.SERVER_AutoHop and g.SERVER_AutoHop.Value do local a8=math.max(1,f.SERVER_HopDelay and f.SERVER_HopDelay.Value or 60)local a9=0;while a9<a8 and a5.enabled and g.SERVER_AutoHop.Value do task.wait(1)a9=a9+1 end;if not(a5.enabled and g.SERVER_AutoHop.Value)then break end;local aa=math.max(0,math.floor(f.SERVER_MinPlayers and f.SERVER_MinPlayers.Value or 0))local Y,a2=nil,nil;for U=1,6 do local _=X(Y)if not _ or not _.data then break end;local a0={}for U,a1 in ipairs(_.data)do if a1.id~=game.JobId and a1.playing<a1.maxPlayers and a1.playing>=aa then a0[#a0+1]=a1 end end;if#a0>0 then a2=a0[math.random(1,#a0)]break end;Y=_.nextPageCursor;if not Y then break end end;if a2 and game.PlaceId and d.player then e:Notify(("Auto-hop: joining %s (%d/%d)"):format(a2.id,a2.playing,a2.maxPlayers),3)b.TeleportService:TeleportToPlaceInstance(game.PlaceId,a2.id,d.player)else e:Notify("Auto-hop: no suitable server found; retrying after delay.",3)end end;a5.thread=nil end)end;local ab=W:AddToggle("SERVER_AutoHop",{Text="Auto Hop",Default=false})W:AddSlider("SERVER_HopDelay",{Text="Hop Delay (s)",Default=180,Min=5,Max=600,Rounding=0,Tooltip="Seconds to wait between hops"})W:AddSlider("SERVER_MinPlayers",{Text="Minimum Players",Default=3,Min=0,Max=20,Rounding=0,Tooltip="Only join servers with at least this many players"})ab:OnChanged(function()if not game.PlaceId or not d.player then e:Notify("Cannot auto-hop: missing PlaceId/LocalPlayer.",5)pcall(function()g.SERVER_AutoHop:SetValue(false)end)return end;if g.SERVER_AutoHop.Value then a7()else a6()end end)local ac=c.Misc:AddRightGroupbox("Environment","trees")local ad,ae=false,Color3.fromRGB(128,128,128)local af=b.Lighting and b.Lighting.Ambient or Color3.new()local ag,ah,ai=false,b.Lighting and b.Lighting.ClockTime or 12,nil;local function aj()if b.Lighting then b.Lighting.Ambient=ad and ae or af end end;ac:AddToggle("ENV_Ambient",{Text="Custom Ambient",Default=false,Tooltip="Choose your own custom ambient color.",Callback=function(C)ad=C;aj()end})ac:AddLabel("Ambient Color"):AddColorPicker("ENV_AmbientColor",{Default=ae,Title="Ambient Color",Callback=function(ak)ae=ak;if ad then aj()end end})ac:AddToggle("ENV_TimeLock",{Text="Custom Time of Day",Default=false,Callback=function(T)ag=T;if T then if b.Lighting then b.Lighting.ClockTime=ah end;if not ai then ai=b.RunService.RenderStepped:Connect(h(function()if b.Lighting then b.Lighting.ClockTime=ah end end))end;e:Notify("Time of Day locked.",3)else if ai then ai:Disconnect()ai=nil end;e:Notify("Time of Day unlocked.",3)end end})ac:AddSlider("ENV_Time",{Text="Time of Day",Default=ah,Min=0,Max=24,Rounding=2,Suffix="h",Callback=function(C)ah=C;if ag and b.Lighting then b.Lighting.ClockTime=C end end})local function al()if ai then ai:Disconnect()ai=nil end;if b.Lighting then b.Lighting.Ambient=af end end;local am=c.Misc:AddLeftGroupbox("Spectate","view")local an,ao;local ap=am:AddDropdown("SpectateTarget",{Values={},Default=nil,Multi=false,Text="Select Player"})am:AddButton({Text="Refresh Players",Func=function()local B={}for U,aq in ipairs(b.Players:GetPlayers())do if aq~=d.player then B[#B+1]=aq.Name end end;ap:SetValues(B)end})local ar=am:AddToggle("SpectateEnabled",{Text="Spectate Player",Default=false})local function as()if an then an:Disconnect()an=nil end;ao=nil;if d.humanoid then d.camera.CameraSubject=d.humanoid end end;local function at(au)as()ao=au;if not ao then return end;an=b.RunService.RenderStepped:Connect(h(function()local av=ao.Character;if av and av:FindFirstChild("Humanoid")then d.camera.CameraSubject=av:FindFirstChild("Humanoid")else as()ar:SetValue(false)end end))end;ar:OnChanged(function()if ar.Value then local aw=ap.Value;local au=aw and b.Players:FindFirstChild(aw)if au then at(au)else e:Notify("Select a player to spectate.",3)ar:SetValue(false)end else as()end end)ap:OnChanged(function(aw)if ar.Value then local au=aw and b.Players:FindFirstChild(aw)if au then at(au)end end end)b.Players.PlayerAdded:Connect(function()local B={}for U,aq in ipairs(b.Players:GetPlayers())do if aq~=d.player then B[#B+1]=aq.Name end end;ap:SetValues(B)end)b.Players.PlayerRemoving:Connect(function(ax)local B={}for U,aq in ipairs(b.Players:GetPlayers())do if aq~=d.player and aq~=ax then B[#B+1]=aq.Name end end;ap:SetValues(B)if ao==ax then ar:SetValue(false)end end)do local B={}for U,aq in ipairs(b.Players:GetPlayers())do if aq~=d.player then B[#B+1]=aq.Name end end;ap:SetValues(B)end;local ay={}function ay.Unload()p()al()as()if g.SERVER_AutoHop and g.SERVER_AutoHop.Value then g.SERVER_AutoHop:SetValue(false)end;pcall(function()if a5 and a5.thread then a5.enabled=false end end)end;return ay end
