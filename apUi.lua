local a=game:GetService("Players")local b=game:GetService("UserInputService")local c=game:GetService("RunService")local d=game:GetService("CoreGui")local e=game:GetService("TweenService")local f=game:GetService("Workspace")local g=a.LocalPlayer;local h=g and g:GetMouse()local i=getgenv and(getgenv().protectgui or getgenv().ProtectGui)or syn and syn.protect_gui or function()end;local j={}j.__index=j;local k={Background=Color3.fromRGB(8,10,14),Panel=Color3.fromRGB(18,22,30),PanelDark=Color3.fromRGB(12,15,22),PanelSoft=Color3.fromRGB(26,32,40),Accent=Color3.fromRGB(0,220,140),AccentSoft=Color3.fromRGB(0,180,120),Border=Color3.fromRGB(40,52,64),Text=Color3.fromRGB(235,240,245),TextDim=Color3.fromRGB(150,170,185),Danger=Color3.fromRGB(255,90,110),Shadow=Color3.fromRGB(0,0,0)}local function l(m,n)local o=Instance.new(m)for p,q in pairs(n)do o[p]=q end;return o end;local function r(s,t,u)local v=false;local w,x,y;t.InputBegan:Connect(function(z)if z.UserInputType==Enum.UserInputType.MouseButton1 then v=true;w=z.Position;x=s.Position;y=u and u.Position or nil;z.Changed:Connect(function()if z.UserInputState==Enum.UserInputState.End then v=false end end)end end)b.InputChanged:Connect(function(z)if v and z.UserInputType==Enum.UserInputType.MouseMovement then local A=z.Position-w;local B=UDim2.new(x.X.Scale,x.X.Offset+A.X,x.Y.Scale,x.Y.Offset+A.Y)s.Position=B;if u and y then u.Position=UDim2.new(y.X.Scale,y.X.Offset+A.X,y.Y.Scale,y.Y.Offset+A.Y)end end end)end;function j.CreateWindow(C)C=C or{}local D=C.Title or"Cerberus AutoParry Lab"local E=C.Size or Vector2.new(900,520)local F=C.CanMinimise~=false;local G=C.IconImageId or""local H=d:FindFirstChild("Cerberus_AutoParryUI")if H then H:Destroy()end;local I=l("ScreenGui",{Name="Cerberus_AutoParryUI",ResetOnSpawn=false,ZIndexBehavior=Enum.ZIndexBehavior.Global,IgnoreGuiInset=true,DisplayOrder=C.DisplayOrder or 100})i(I)I.Parent=d;local J=UDim2.fromOffset(E.X,E.Y)local K=UDim2.fromOffset(math.floor(E.X*0.9),math.floor(E.Y*0.9))local L=Vector2.new(1280,720)local M=f.CurrentCamera;if M then L=M.ViewportSize end;local N=UDim2.new(0.5,-math.floor(E.X/2),0.5,-math.floor(E.Y/2))local O=UDim2.new(0.5,-math.floor(E.X*0.9/2),0.5,-math.floor(E.Y*0.9/2))local P=l("Frame",{Name="Shadow",Size=K,Position=O+UDim2.fromOffset(8,10),BackgroundColor3=k.Shadow,BorderSizePixel=0,BackgroundTransparency=1,ZIndex=1})P.Parent=I;local Q=l("Frame",{Name="MainWindow",Size=K,Position=O,BackgroundColor3=k.Background,BorderColor3=k.Border,ZIndex=2})Q.Parent=I;local R=l("UICorner",{CornerRadius=UDim.new(0,10)})R.Parent=Q;local S=l("UIStroke",{Color=k.Border,Thickness=1,Transparency=0.2,ApplyStrokeMode=Enum.ApplyStrokeMode.Border})S.Parent=Q;local T=l("Frame",{Name="TopBar",Size=UDim2.new(1,0,0,34),BackgroundColor3=k.PanelDark,BorderSizePixel=0,ZIndex=3})T.Parent=Q;local U=l("UIGradient",{Color=ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(20,24,32)),ColorSequenceKeypoint.new(1,Color3.fromRGB(12,16,24))}),Transparency=NumberSequence.new(0),Rotation=0})U.Parent=T;if G~=""then local V=l("ImageLabel",{Name="Icon",Size=UDim2.fromOffset(22,22),Position=UDim2.fromOffset(8,6),BackgroundTransparency=1,Image=G,ZIndex=4})V.Parent=T else local V=l("Frame",{Name="Icon",Size=UDim2.fromOffset(22,22),Position=UDim2.fromOffset(8,6),BackgroundColor3=k.Accent,BorderSizePixel=0,ZIndex=4})V.Parent=T;local W=l("UICorner",{CornerRadius=UDim.new(1,0)})W.Parent=V;local X=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(1,0,1,0),Text="C",Font=Enum.Font.GothamBold,TextSize=14,TextColor3=Color3.fromRGB(0,0,0),ZIndex=5})X.Parent=V end;local Y=l("TextLabel",{Name="Title",Size=UDim2.new(1,-130,1,0),Position=UDim2.fromOffset(36,0),BackgroundTransparency=1,Text=D.."  |  Cerberus",TextColor3=k.Text,Font=Enum.Font.GothamMedium,TextXAlignment=Enum.TextXAlignment.Left,TextSize=16,ZIndex=4})Y.Parent=T;local Z=l("TextButton",{Name="Minimise",Size=UDim2.fromOffset(26,22),Position=UDim2.new(1,-60,0.5,-11),BackgroundColor3=k.PanelDark,BorderSizePixel=0,Text="–",TextColor3=k.Text,Font=Enum.Font.GothamSemibold,TextSize=16,Visible=F,ZIndex=4,AutoButtonColor=false})Z.Parent=T;local _=l("TextButton",{Name="Close",Size=UDim2.fromOffset(26,22),Position=UDim2.new(1,-30,0.5,-11),BackgroundColor3=k.PanelDark,BorderSizePixel=0,Text="×",TextColor3=k.Danger,Font=Enum.Font.GothamSemibold,TextSize=16,ZIndex=4,AutoButtonColor=false})_.Parent=T;local a0=l("Frame",{Name="AccentLine",Size=UDim2.new(1,0,0,2),Position=UDim2.new(0,0,1,-2),BackgroundColor3=k.Accent,BorderSizePixel=0,ZIndex=3})a0.Parent=T;local a1=l("Frame",{Name="BottomBar",Size=UDim2.new(1,0,0,22),Position=UDim2.new(0,0,1,-22),BackgroundColor3=k.PanelDark,BorderSizePixel=0,ZIndex=3})a1.Parent=Q;local a2=l("UIGradient",{Color=ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(14,18,26)),ColorSequenceKeypoint.new(1,Color3.fromRGB(10,13,20))})})a2.Parent=a1;local a3=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(1,-10,1,0),Position=UDim2.fromOffset(8,0),Text="Cerberus AutoParry Config Tool",Font=Enum.Font.Code,TextColor3=k.TextDim,TextXAlignment=Enum.TextXAlignment.Left,TextSize=14,ZIndex=4})a3.Parent=a1;local a4=l("Frame",{Name="TabsPanel",Size=UDim2.new(0,168,1,-34-22),Position=UDim2.fromOffset(1,34),BackgroundColor3=k.PanelDark,BorderSizePixel=0,ZIndex=2})a4.Parent=Q;local a5=l("UIListLayout",{FillDirection=Enum.FillDirection.Vertical,SortOrder=Enum.SortOrder.LayoutOrder,Padding=UDim.new(0,3)})a5.Parent=a4;local a6=l("UIPadding",{PaddingTop=UDim.new(0,4),PaddingBottom=UDim.new(0,4),PaddingLeft=UDim.new(0,4),PaddingRight=UDim.new(0,2)})a6.Parent=a4;local a7=l("Frame",{Name="ContentPanel",Size=UDim2.new(1,-178,1,-34-22-6),Position=UDim2.new(0,178,0,34),BackgroundColor3=k.Panel,BorderColor3=k.Border,ZIndex=2})a7.Parent=Q;local a8=l("UICorner",{CornerRadius=UDim.new(0,8)})a8.Parent=a7;local a9=l("UIStroke",{Color=k.Border,Thickness=1,Transparency=0.4,ApplyStrokeMode=Enum.ApplyStrokeMode.Border})a9.Parent=a7;local aa=l("UIGradient",{Color=ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(20,25,34)),ColorSequenceKeypoint.new(1,Color3.fromRGB(16,20,28))}),Rotation=90})aa.Parent=a7;local ab=setmetatable({},j)ab._gui=I;ab._mainFrame=Q;ab._shadow=P;ab._tabsPanel=a4;ab._contentPanel=a7;ab._tabs={}ab._currentTab=nil;ab._minimised=false;ab._origSize=J;r(Q,T,P)_.MouseButton1Click:Connect(function()I:Destroy()end)local function ac(ad,C)C=C or{}local ae=C.IsClose or false;local R=l("UICorner",{CornerRadius=UDim.new(0,4)})R.Parent=ad;local S=l("UIStroke",{Color=k.Border,Thickness=1,Transparency=0.6,ApplyStrokeMode=Enum.ApplyStrokeMode.Border})S.Parent=ad;local af=k.PanelDark;local ag=ae and Color3.fromRGB(40,20,26)or k.Panel;local ah=ae and Color3.fromRGB(70,30,40)or k.Border;ad.BackgroundColor3=af;ad.MouseEnter:Connect(function()ad.BackgroundColor3=ag end)ad.MouseLeave:Connect(function()ad.BackgroundColor3=af end)ad.MouseButton1Down:Connect(function()ad.BackgroundColor3=ah end)ad.MouseButton1Up:Connect(function()ad.BackgroundColor3=ag end)end;ac(Z,{IsClose=false})ac(_,{IsClose=true})Z.MouseButton1Click:Connect(function()ab._minimised=not ab._minimised;if ab._minimised then ab._origSize=ab._origSize or J;Q.Size=UDim2.new(ab._origSize.X.Scale,ab._origSize.X.Offset,0,34)P.Size=Q.Size;a7.Visible=false;a4.Visible=false;a1.Visible=false;Z.Text="+"else Q.Size=ab._origSize;P.Size=ab._origSize;a7.Visible=true;a4.Visible=true;a1.Visible=true;Z.Text="–"end end)Q.Size=K;P.Size=K;Q.Position=O;P.Position=O+UDim2.fromOffset(8,10)Q.BackgroundTransparency=0.1;P.BackgroundTransparency=1;local ai=TweenInfo.new(0.25,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)e:Create(Q,ai,{Size=J,Position=N,BackgroundTransparency=0}):Play()e:Create(P,ai,{Size=J,Position=N+UDim2.fromOffset(8,10),BackgroundTransparency=1}):Play()return ab end;function j:AddTab(aj)local ad=l("TextButton",{Size=UDim2.new(1,-2,0,30),BackgroundColor3=k.PanelDark,BorderSizePixel=0,Text="  "..aj,TextColor3=k.Text,Font=Enum.Font.Gotham,TextXAlignment=Enum.TextXAlignment.Left,TextSize=14,AutoButtonColor=false,ZIndex=3})ad.Parent=self._tabsPanel;local ak=l("UICorner",{CornerRadius=UDim.new(0,6)})ak.Parent=ad;local al=l("Frame",{Name="Accent",Size=UDim2.new(0,3,1,-6),Position=UDim2.new(0,2,0,3),BackgroundColor3=k.Accent,BorderSizePixel=0,Visible=false,ZIndex=4})al.Parent=ad;local am=l("Frame",{Name="Tab_"..aj,Size=UDim2.new(1,-10,1,-10),Position=UDim2.fromOffset(5,5),BackgroundColor3=k.Panel,BorderSizePixel=0,Visible=false,ClipsDescendants=true,ZIndex=2})am.Parent=self._contentPanel;local an=l("UIListLayout",{FillDirection=Enum.FillDirection.Vertical,SortOrder=Enum.SortOrder.LayoutOrder,Padding=UDim.new(0,4)})an.Parent=am;local ao=l("UIPadding",{PaddingLeft=UDim.new(0,6),PaddingRight=UDim.new(0,6),PaddingTop=UDim.new(0,6),PaddingBottom=UDim.new(0,6)})ao.Parent=am;ad.MouseEnter:Connect(function()if self._currentTab~=aj then ad.BackgroundColor3=k.PanelSoft end end)ad.MouseLeave:Connect(function()if self._currentTab~=aj then ad.BackgroundColor3=k.PanelDark end end)local ap={Name=aj,Button=ad,Frame=am,Accent=al}self._tabs[aj]=ap;ad.MouseButton1Click:Connect(function()self:ShowTab(aj)end)if not self._currentTab then self:ShowTab(aj)end;return setmetatable(ap,{__index={AddSection=function(aq,ar)local as=l("Frame",{BackgroundColor3=k.PanelDark,BorderColor3=k.Border,Size=UDim2.new(1,0,0,0),AutomaticSize=Enum.AutomaticSize.Y,ZIndex=2})as.Parent=am;local at=l("UICorner",{CornerRadius=UDim.new(0,6)})at.Parent=as;local au=l("UIStroke",{Color=k.Border,Thickness=1,Transparency=0.6})au.Parent=as;local av=l("UIListLayout",{FillDirection=Enum.FillDirection.Vertical,SortOrder=Enum.SortOrder.LayoutOrder,Padding=UDim.new(0,2)})av.Parent=as;local aw=l("UIPadding",{PaddingLeft=UDim.new(0,6),PaddingRight=UDim.new(0,6),PaddingTop=UDim.new(0,4),PaddingBottom=UDim.new(0,4)})aw.Parent=as;local ax=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(1,-8,0,20),Text=ar,Font=Enum.Font.GothamMedium,TextColor3=k.Accent,TextXAlignment=Enum.TextXAlignment.Left,TextSize=15,ZIndex=3})ax.Parent=as;return{Frame=as,Layout=av,AddLabel=function(ay,az,aA)local aB=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(1,-8,0,aA or 18),Text=az,Font=Enum.Font.Code,TextColor3=k.TextDim,TextXAlignment=Enum.TextXAlignment.Left,TextWrapped=true,TextSize=13,ZIndex=3})aB.Parent=as;return aB end}end,AddButton=function(aq,aC,aD,aE)local aF=l("TextButton",{Size=UDim2.new(1,0,0,aE or 28),BackgroundColor3=k.PanelDark,BorderColor3=k.Border,Text=aC,TextColor3=k.Text,Font=Enum.Font.Gotham,TextSize=14,ZIndex=2,AutoButtonColor=false})aF.Parent=am;local ak=l("UICorner",{CornerRadius=UDim.new(0,6)})ak.Parent=aF;aF.MouseEnter:Connect(function()aF.BackgroundColor3=k.PanelSoft end)aF.MouseLeave:Connect(function()aF.BackgroundColor3=k.PanelDark end)aF.MouseButton1Click:Connect(function()if aD then task.spawn(aD)end end)return aF end,AddToggle=function(aq,aC,aG,aD)local aH=l("Frame",{Size=UDim2.new(1,0,0,26),BackgroundTransparency=1,ZIndex=2})aH.Parent=am;local aI=32;local aJ=18;local aK=l("Frame",{Size=UDim2.fromOffset(aI,aJ),Position=UDim2.fromOffset(4,4),BackgroundColor3=k.PanelDark,BorderSizePixel=0,ZIndex=3})aK.Parent=aH;local aL=l("UICorner",{CornerRadius=UDim.new(1,0)})aL.Parent=aK;local aM=l("Frame",{Size=UDim2.fromOffset(aJ-4,aJ-4),Position=UDim2.fromOffset(2,2),BackgroundColor3=k.Text,BorderSizePixel=0,ZIndex=4})aM.Parent=aK;local aN=l("UICorner",{CornerRadius=UDim.new(1,0)})aN.Parent=aM;local aB=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(1,-aI-10,1,0),Position=UDim2.fromOffset(aI+10,0),Text=aC,Font=Enum.Font.Gotham,TextSize=14,TextXAlignment=Enum.TextXAlignment.Left,TextColor3=k.Text,ZIndex=3})aB.Parent=aH;local aO=aG and true or false;local function aP(aQ)local aR=aO and k.AccentSoft or k.PanelDark;local aS=aO and aI-(aJ-4)-2 or 2;if aQ then e:Create(aK,TweenInfo.new(0.12,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundColor3=aR}):Play()e:Create(aM,TweenInfo.new(0.12,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{Position=UDim2.fromOffset(aS,2)}):Play()else aK.BackgroundColor3=aR;aM.Position=UDim2.fromOffset(aS,2)end end;local function aT(q)aO=not not q;aP(true)if aD then aD(aO)end end;aP(false)local function aU()aT(not aO)end;local aV=l("TextButton",{BackgroundTransparency=1,Size=UDim2.new(1,0,1,0),Text="",ZIndex=5})aV.Parent=aH;aV.MouseButton1Click:Connect(aU)return{Set=aT,Get=function()return aO end}end,AddSlider=function(aq,aC,aW,aX,aG,aD)local aH=l("Frame",{Size=UDim2.new(1,0,0,48),BackgroundTransparency=1,ZIndex=2})aH.Parent=am;local aB=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(1,-4,0,18),Position=UDim2.fromOffset(4,0),Text=aC,Font=Enum.Font.Gotham,TextSize=14,TextXAlignment=Enum.TextXAlignment.Left,TextColor3=k.Text,ZIndex=3})aB.Parent=aH;local aY=l("Frame",{Size=UDim2.new(1,-8,0,12),Position=UDim2.fromOffset(4,24),BackgroundColor3=k.PanelDark,BorderColor3=k.Border,ZIndex=3})aY.Parent=aH;local aZ=l("UICorner",{CornerRadius=UDim.new(0,4)})aZ.Parent=aY;local a_=l("UIStroke",{Color=k.Border,Thickness=1,Transparency=0.6})a_.Parent=aY;local b0=l("Frame",{Size=UDim2.new(0,0,1,0),BackgroundColor3=k.Accent,BorderSizePixel=0,ZIndex=4})b0.Parent=aY;local b1=l("UICorner",{CornerRadius=UDim.new(0,4)})b1.Parent=b0;local b2=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(0,80,0,18),Position=UDim2.new(1,-84,0,0),Text="",Font=Enum.Font.Code,TextSize=13,TextXAlignment=Enum.TextXAlignment.Right,TextColor3=k.TextDim,ZIndex=3})b2.Parent=aH;local b3=aG or aW;local v=false;local b4,b5;local function b6()local b7=(b3-aW)/(aX-aW)b7=math.clamp(b7,0,1)b0.Size=UDim2.new(b7,0,1,0)b2.Text=string.format("%.2f",b3)end;local function aT(q)q=tonumber(q)or aW;q=math.clamp(q,aW,aX)b3=q;b6()if aD then aD(b3)end end;local function b8()if not h then return end;local b9=aY.AbsolutePosition.X;local ba=aY.AbsoluteSize.X;if ba<=0 then return end;local bb=math.clamp((h.X-b9)/ba,0,1)aT(aW+(aX-aW)*bb)end;aY.InputBegan:Connect(function(z)if z.UserInputType==Enum.UserInputType.MouseButton1 and h then v=true;b8()if b4 then b4:Disconnect()end;if b5 then b5:Disconnect()end;b4=b.InputChanged:Connect(function(bc)if v and bc.UserInputType==Enum.UserInputType.MouseMovement then b8()end end)b5=b.InputEnded:Connect(function(bc)if bc.UserInputType==Enum.UserInputType.MouseButton1 then v=false;if b4 then b4:Disconnect()end;if b5 then b5:Disconnect()end;b4,b5=nil,nil end end)end end)aT(b3)return{Set=aT,Get=function()return b3 end}end,AddList=function(aq,aE)local bd=l("Frame",{Size=UDim2.new(1,0,0,aE or 200),BackgroundColor3=k.PanelDark,BorderColor3=k.Border,ZIndex=2})bd.Parent=am;local R=l("UICorner",{CornerRadius=UDim.new(0,6)})R.Parent=bd;local S=l("UIStroke",{Color=k.Border,Thickness=1,Transparency=0.6})S.Parent=bd;local be=l("ScrollingFrame",{Size=UDim2.new(1,-6,1,-6),Position=UDim2.fromOffset(3,3),CanvasSize=UDim2.new(0,0,0,0),ScrollBarThickness=4,BackgroundTransparency=1,ZIndex=2})be.Parent=bd;local an=l("UIListLayout",{FillDirection=Enum.FillDirection.Vertical,SortOrder=Enum.SortOrder.LayoutOrder,Padding=UDim.new(0,2)})an.Parent=be;an:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()be.CanvasSize=UDim2.new(0,0,0,an.AbsoluteContentSize.Y+4)end)local bf={Container=bd,Scroller=be,Layout=an,Items={}}function bf:AddItem(bg,aU)local ad=l("TextButton",{Size=UDim2.new(1,-4,0,24),BackgroundColor3=k.Panel,BorderColor3=k.Border,Text=bg,TextColor3=k.Text,TextXAlignment=Enum.TextXAlignment.Left,Font=Enum.Font.Gotham,TextSize=14,ZIndex=2,AutoButtonColor=false})ad.Parent=be;local ak=l("UICorner",{CornerRadius=UDim.new(0,4)})ak.Parent=ad;ad.MouseEnter:Connect(function()ad.BackgroundColor3=k.PanelSoft end)ad.MouseLeave:Connect(function()ad.BackgroundColor3=k.Panel end)ad.MouseButton1Click:Connect(function()if aU then aU(ad)end end)table.insert(self.Items,ad)return ad end;function bf:Clear()for aq,o in ipairs(self.Items)do if o then o:Destroy()end end;self.Items={}end;function bf:SetItemText(ad,az)if ad and ad:IsA("TextButton")then ad.Text=az end end;return bf end,AddTimeline=function(aq,aE)local bd=l("Frame",{Size=UDim2.new(1,-4,0,aE or 190),Position=UDim2.fromOffset(2,0),BackgroundColor3=k.PanelDark,BorderColor3=k.Border,ZIndex=2})bd.Parent=am;local R=l("UICorner",{CornerRadius=UDim.new(0,6)})R.Parent=bd;local S=l("UIStroke",{Color=k.Border,Thickness=1,Transparency=0.6})S.Parent=bd;local bh=l("Frame",{Size=UDim2.new(1,-20,0,18),Position=UDim2.fromOffset(10,4),BackgroundColor3=k.Panel,BorderColor3=k.Border,ZIndex=2})bh.Parent=bd;local aZ=l("UICorner",{CornerRadius=UDim.new(0,4)})aZ.Parent=bh;local a_=l("UIStroke",{Color=k.Border,Thickness=1,Transparency=0.7})a_.Parent=bh;local bi={}for bj=1,5 do local aB=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(0,60,0,14),Position=UDim2.new((bj-1)/4,-30,1,1),Text="",TextColor3=k.TextDim,Font=Enum.Font.Code,TextSize=11,TextXAlignment=Enum.TextXAlignment.Center,ZIndex=3})aB.Parent=bh;bi[bj]=aB end;local bk=l("Frame",{Size=UDim2.new(1,-20,1,-40),Position=UDim2.fromOffset(10,22),BackgroundTransparency=1,ClipsDescendants=true,ZIndex=2})bk.Parent=bd;for bj=1,3 do local bl=l("Frame",{Name="LaneSep",Size=UDim2.new(1,0,0,1),Position=UDim2.new(0,0,bj/4,0),BackgroundColor3=Color3.fromRGB(40,50,58),BorderSizePixel=0,ZIndex=2})bl.Parent=bk end;local bm=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(1,-12,0,16),Position=UDim2.new(0,6,1,-18),Text="Hover event for details",TextColor3=k.TextDim,Font=Enum.Font.Code,TextSize=13,TextXAlignment=Enum.TextXAlignment.Left,ZIndex=3})bm.Parent=bd;local bn=l("Frame",{BackgroundColor3=k.Panel,BorderColor3=k.Border,Size=UDim2.new(0,260,0,44),Visible=false,ZIndex=100})bn.Parent=bd;local bo=l("UICorner",{CornerRadius=UDim.new(0,6)})bo.Parent=bn;local bp=l("UIStroke",{Color=k.Border,Thickness=1,Transparency=0.5})bp.Parent=bn;local bq=l("TextLabel",{BackgroundTransparency=1,Size=UDim2.new(1,-8,1,-6),Position=UDim2.fromOffset(4,3),Font=Enum.Font.Code,TextSize=13,TextXAlignment=Enum.TextXAlignment.Left,TextYAlignment=Enum.TextYAlignment.Top,TextWrapped=true,TextColor3=k.Text,Text="",ZIndex=101})bq.Parent=bn;local br=false;local function bs(az)bq.Text=az;bn.Visible=true;br=true end;local function bt()bn.Visible=false;br=false;bm.Text="Hover event for details"end;local bu={Container=bd,Bar=bh,EventsLayer=bk,InfoLabel=bm,Events={},SpanSeconds=10,Paused=false,Filters={anim=true,config=true,parry=true,schedule=true,damage=true},_lastCleanup=os.clock(),_ticks=bi,_pausedAt=nil,IgnorePredicate=nil}function bu:HideTooltip()bt()end;function bu:SetIgnorePredicate(bv)self.IgnorePredicate=bv end;local function bw()local bx=bu.SpanSeconds;for bj,aB in ipairs(bi)do local by=(bj-1)/(#bi-1)local bz=by*bx;if bj==1 then aB.Text="now"else aB.Text=string.format("-%.1fs",bz)end end end;bw()function bu:AddEvent(bz)bz.time=bz.time or os.clock()bz.type=bz.type or"anim"bz.label=bz.label or"event"table.insert(self.Events,bz)end;function bu:SetSpan(bA)self.SpanSeconds=math.max(1,bA or 10)bw()self:Redraw()end;function bu:SetPaused(bB)self.Paused=not not bB;if self.Paused then self._pausedAt=os.clock()else self._pausedAt=nil end;self:Redraw()end;function bu:SetFilter(bC,bD)self.Filters[bC]=not not bD;self:Redraw()end;local function bE(bF,bG)local bH=(bG-bF.time)*1000;if bF.type=="anim"or bF.type=="config"then local bI=bF.animName or bF.label or"Unknown animation"local bJ=bF.sourceName or bF.info or"?"local bK=bF.inConfig or bF.type=="config"return string.format("%s\nSource: %s\nIn config: %s\nΔt: %.0f ms",tostring(bI),tostring(bJ),bK and"yes"or"no",bH)end;if bF.type=="parry"or bF.type=="schedule"then local bI=bF.animName or bF.label or"Parry"local bJ=bF.sourceName or bF.info or"?"local bL=bF.chainId or"?"local bM=bF.type=="schedule"and"Scheduled parry"or"Parry"return string.format("%s (chain %s)\nAnim: %s\nSource: %s\nΔt: %.0f ms",bM,tostring(bL),tostring(bI),tostring(bJ),bH)end;if bF.type=="damage"then local bJ=bF.sourceName or bF.info or""return string.format("Damage taken: %s\n%s\nΔt: %.0f ms",tostring(bF.label or""),tostring(bJ),bH)end;local bN=string.format("[%s] %s (%.0f ms ago)",tostring(bF.type),tostring(bF.label or""),bH)if bF.info then bN=bN.."\n"..tostring(bF.info)end;return bN end;function bu:Redraw()for aq,bO in ipairs(self.EventsLayer:GetChildren())do if bO:IsA("Frame")and bO.Name~="LaneSep"then bO:Destroy()end end;local bG=self.Paused and(self._pausedAt or os.clock())or os.clock()local bx=self.SpanSeconds;local bP=bG-bx;local bQ=self.Bar.AbsoluteSize.X;local bR=self.EventsLayer.AbsoluteSize.Y;if bQ<=0 or bR<=0 then return end;if os.clock()-self._lastCleanup>5 then local bS={}local bT=os.clock()-60;for aq,bF in ipairs(self.Events)do if bF.time>=bT then table.insert(bS,bF)end end;self.Events=bS;self._lastCleanup=os.clock()end;local bU=4;local bV=bR/bU;local bW={anim=1,config=2,parry=3,schedule=3,damage=3}for aq,bF in ipairs(self.Events)do if bF.time>=bP and bF.time<=bG then if(not self.IgnorePredicate or not self.IgnorePredicate(bF))and self.Filters[bF.type]~=false then local bX=(bG-bF.time)/bx;local b7=math.clamp(bX,0,1)local bY=b7*bQ;local bZ=k.Accent;if bF.type=="config"then bZ=Color3.fromRGB(120,220,150)elseif bF.type=="parry"then bZ=Color3.fromRGB(255,190,100)elseif bF.type=="schedule"then bZ=Color3.fromRGB(190,150,255)elseif bF.type=="damage"then bZ=k.Danger end;local b_=bW[bF.type]or 1;b_=math.clamp(b_,1,bU)local c0=(b_-0.5)*bV;local c1=14;local c2=l("Frame",{Size=UDim2.fromOffset(7,c1),Position=UDim2.fromOffset(bY-3,c0-c1/2),BackgroundColor3=bZ,BorderColor3=k.Border,ZIndex=3,Active=true})c2.Parent=self.EventsLayer;local c3=l("UICorner",{CornerRadius=UDim.new(1,0)})c3.Parent=c2;local c4=bE(bF,bG)c2.MouseEnter:Connect(function()bm.Text=c4;bs(c4)end)c2.MouseLeave:Connect(function()bt()end)c2.InputBegan:Connect(function(z)if z.UserInputType==Enum.UserInputType.MouseButton1 then if self.OnEventClicked then self.OnEventClicked(bF)end end end)end end end end;c.Heartbeat:Connect(function()if br then local c5=b:GetMouseLocation()local c6=bd.AbsolutePosition;local c7=bn.AbsoluteSize.X;local c8=bn.AbsoluteSize.Y;local c9=c5.X-c6.X+12;local ca=c5.Y-c6.Y-c8-8;if ca<0 then ca=c5.Y-c6.Y+8 end;bn.Position=UDim2.fromOffset(c9,ca)end;if bd.Parent and bd.Visible and not bu.Paused then bu:Redraw()end end)return bu end}})end;function j:ShowTab(aj)for cb,ap in pairs(self._tabs)do local cc=cb==aj;ap.Frame.Visible=cc;ap.Button.BackgroundColor3=cc and k.AccentSoft or k.PanelDark;ap.Button.TextColor3=cc and k.Background or k.Text;if ap.Accent then ap.Accent.Visible=cc end end;self._currentTab=aj end;return j
